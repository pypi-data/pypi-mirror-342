{"version":3,"file":"lib_index_js.ea07e9e03c92ff760901.js","mappings":"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","sources":["webpack://pwb_jupyterlab/./src/constants.ts","webpack://pwb_jupyterlab/./src/disconnectAlert.tsx","webpack://pwb_jupyterlab/./src/disconnectMonitor.ts","webpack://pwb_jupyterlab/./src/handler.ts","webpack://pwb_jupyterlab/./src/index.ts","webpack://pwb_jupyterlab/./src/proxiedServersComponent.tsx","webpack://pwb_jupyterlab/./src/widget.tsx"],"sourcesContent":["/*\n * constants.ts\n *\n * Copyright (C) 2022 by Posit Software, PBC\n *\n */\n\n// This file shares variables with './pwb_jupyterlab/constants.py'\n// Changes made to this file may need to be duplicated there.\n\n// default process names\nexport const kShinyApp = 'Shiny Project';\nexport const kQuartoApp = 'Quarto Project';\n\n// pwb_jupyterlab server extension endpoints\nexport const kServerEndpoint = 'servers';\nexport const kUrlEndpoint = 'url';\nexport const kHeartbeatEndpoint = 'heartbeat';\n","/*\n * disconnectAlert.tsx\n *\n * Copyright (C) 2023 by Posit Software, PBC\n *\n */\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { disconnectRetry, listen, Listener } from './disconnectMonitor';\nimport * as ReactDOM from 'react-dom';\n\nexport function WorkbenchDisconnectWidget(): JSX.Element {\n\n  const [ message, setMessage ] = useState('');\n  const [ visible, setVisible ] = useState(false);\n  const [ onAccept, setOnAccept ] = useState<() => void>();\n  const [ buttonFocus, setButtonFocus ] = useState(1);\n\n  const ref = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    let timestamp = 0;\n    let timerId = -1;\n\n    const updateMessage = () => {\n      window.clearTimeout(timerId);\n      const timeDiff = Date.now() - timestamp;\n      const seconds = Math.floor(timeDiff / 1000);\n      const minutes = Math.floor(seconds / 60);\n      setMessage(`The underlying JupyterLab connection has been closed for <span aria-role=\"timer\">${minutes}:${String(seconds % 60).padStart(2, '0')}</span>.<br>Attempting to reconnect...`);\n      timerId = window.setTimeout(() => {\n        updateMessage();\n      }, 1000)\n    }\n\n    const listener: Listener = params => {\n      if (typeof params.timestamp=== 'number') {\n        timestamp = params.timestamp;\n      }\n\n      if (typeof params.onAccept === 'function') {\n        setOnAccept(() => params.onAccept);\n      }\n\n      if (typeof params.dismiss === 'boolean') {\n        setVisible(!params.dismiss);\n        if(params.dismiss) {\n          window.clearTimeout(timerId)\n        } else {\n          updateMessage();\n        }\n      }\n    };\n\n    const unlisten = listen(listener);\n\n    return (() => {\n      window.clearTimeout(timerId);\n      unlisten();\n    })\n  }, [])\n\n  const updateFocus = (direction = 0) => {\n    if (!ref.current) { return; }\n\n\n    const el = ref.current;\n    const buttons = el.querySelectorAll('button');\n\n    let currentFocus = buttonFocus;\n    if (direction) {\n      currentFocus = (buttons.length + currentFocus + Math.sign(direction)) % buttons.length;\n    }\n\n    buttons[currentFocus].focus()\n    setButtonFocus(currentFocus);\n  }\n\n  useEffect(() => {\n    if (!ref.current) { return; }\n\n    const el = ref.current;\n\n    el.style.display = '';\n\n    const anim = el.animate([\n      {\n        opacity: visible ? 0 : 1 \n      },\n      {\n        opacity: visible ? 1 : 0\n      }\n    ], 150)\n\n    const onFinish = () => {\n      el.style.display = visible ? '' : 'none'\n      if (visible) {\n        updateFocus();\n      }\n    }\n  \n    anim.addEventListener('finish', onFinish);\n\n    return (() => {\n      anim.removeEventListener('finish', onFinish)\n    })\n  }, [ visible ])\n\n  const onKeyDown = (evt: React.KeyboardEvent<HTMLDivElement>) => {\n    switch(evt.code) {\n    case 'ArrowLeft':\n    case 'ArrowRight':\n    case 'Tab':\n      evt.preventDefault();\n      evt.stopPropagation();\n      updateFocus(1);\n    }\n  }\n\n  return (\n    <div\n      ref={ ref }\n      id=\"workbench-disconnect-alert\"\n      className=\"jp-workbench-disconnect-alert jp-Dialog-content\"\n      style={ { display: 'none' } }\n      tabIndex={ 0 }\n      aria-role=\"alertdialog\"\n      aria-hidden={ !visible }\n      aria-describedby=\"workbench-disconnect-alert-message\"\n      onKeyDown={ onKeyDown }\n    >\n      <div \n        id=\"workbench-disconnect-alert-message\"\n        style={ { gridArea: 'message' } }\n        dangerouslySetInnerHTML={ { __html: message } }\n      />\n      <button \n        id=\"workbench-disconnect-alert-dismiss\"\n        style={ { gridArea: 'dismiss' } }\n        className=\"jp-Dialog-button jp-mod-accept jp-mod-styled\"\n        onClick={ () => { onAccept && onAccept(); } }\n        aria-label=\"Return to Workbench Home\"\n      >\n        Workbench Home \n      </button>\n      <button \n        id=\"workbench-disconnect-alert-retry\"\n        style={ { gridArea: 'retry' } }\n        className=\"jp-Dialog-button jp-mod-reject jp-mod-styled\"\n        onClick={onAccept ? () => { disconnectRetry(onAccept); } : undefined}\n        aria-label=\"Retry connection now\"\n      >\n        Retry Now \n      </button>\n    </div>\n  )\n}\n\nexport function setupDisconnectNotification() {\n  const id = 'workbench-disconnect-layer'\n  let host = document.getElementById(id)\n  if (!host) { \n    host = document.createElement('div');\n    host.id = id;\n    host.style.cssText = `\n      position: absolute;\n      bottom: 26px;\n      right: 34px;\n      z-index: 1000;\n    `;\n    document.body.append(host);\n  }\n  ReactDOM.render(<WorkbenchDisconnectWidget/>, host);\n}\n","/*\n * disconnectMonitor.ts\n *\n * Copyright (C) 2023 by Posit Software, PBC\n *\n */\nimport { Dialog } from '@jupyterlab/apputils';\nimport { requestAPI } from './handler';\nimport { kHeartbeatEndpoint } from './constants';\n\nlet heartbeatId = -1\n\nconst retryIntervals = [ 2, 2, 2, 2, 5, 5, 10, 20, 30 ];\nlet retryCount = 0;\nlet retryTimer = -1;\nlet disconnectTimestamp = 0;\n\nlet existingDialog: Dialog<unknown> | undefined;\n\nasync function displayModal(onAccept: () => void) {\n\n  // dialog already open, do not re-open\n  // it is cleared when the user responds to input\n  if (existingDialog) { return; }\n\n  const acceptButton = Dialog.createButton({\n    accept: true,\n    label: 'Workbench Home'\n  });\n\n  const retryButton = Dialog.createButton({\n    accept: false,\n    label: 'Retry Now'\n  });\n\n  existingDialog = new Dialog ({\n    body: 'The underlying JupyterLab connection has been closed.',\n    title: 'Disconnected from Workbench',\n    hasClose: false,\n    buttons: [ acceptButton, retryButton ]\n  });\n  \n  const result = await existingDialog.launch();\n  if (result.button === acceptButton) {\n    onAccept();\n  } else if (result.button === retryButton) {\n    disconnectRetry(onAccept);\n  }\n  existingDialog.close();\n  existingDialog = undefined\n}\n\nexport type Listener = (params: { timestamp?: number, dismiss?: boolean, onAccept?: () => void }) => void;\nconst listeners = new Set<Listener>();\n\nexport function listen(listener: Listener): () => void {\n  const unlisten = () => {\n    listeners.delete(listener);\n  }\n  listeners.add(listener);\n  return unlisten;\n}\n\nfunction upsertNotification(onAccept: () => void) {\n  for (const listener of listeners.values()) {\n    listener({\n      timestamp: disconnectTimestamp,\n      dismiss: false,\n      onAccept\n    })\n  }\n}\n\nfunction dismissNotification() {\n  for (const listener of listeners) {\n    listener({\n      dismiss: true\n    })\n  }\n}\n\nexport function disconnectRetry(returnHome: () => void) {\n  // assume that we are dead in the water, start a series of delays to re-poll for connection\n  // fire an event to the homepage to display an error\n  const retryPoll = async (currentTry = retryCount) => {\n    retryCount = currentTry;\n    window.clearTimeout(retryTimer);\n    try {\n      const result = await requestAPI<{ result: boolean }>(kHeartbeatEndpoint);\n      if (!result.result) { throw new Error('response was invalid'); }\n\n      // if this succeeds then cancel retries and resume\n      retryCount = 0;\n      dismissNotification();\n      heartbeat(returnHome)\n    } catch (err) {\n      // it's severe if we reach the end of retry intervals\n      if (currentTry > 1) {\n        if (retryCount < retryIntervals.length - 1) {\n          // show / update notification\n          upsertNotification(returnHome);\n        } else {\n          // show modal\n          // this will just pause everything until the user does something about it,\n          // since modals cannot be closed remotely\n          dismissNotification();\n          await displayModal(returnHome);\n        }\n      }\n      retryTimer = window.setTimeout(\n        () => { retryPoll(Math.min(currentTry + 1, retryIntervals.length - 1)); },\n        retryIntervals[currentTry] * 1000\n      );\n    }\n  };\n  retryPoll();\n}\n\nexport function heartbeat(returnHome: () => void) {\n  window.clearTimeout(heartbeatId);\n  heartbeatId = window.setTimeout(async () => {\n    try {\n      const result = await requestAPI<{ result: boolean }>(kHeartbeatEndpoint);\n      if (!result.result) { throw new Error('response was invalid'); }\n      heartbeat(returnHome);\n    } catch (err) {\n      disconnectTimestamp = Date.now();\n      disconnectRetry(returnHome);\n    }\n  }, 30_000);\n}\n\nexport function stopHeartbeat() {\n  window.clearTimeout(heartbeatId);\n}\n","import { URLExt } from '@jupyterlab/coreutils';\n\nimport { ServerConnection } from '@jupyterlab/services';\n\n/**\n * Call the API extension\n *\n * @param endPoint API REST end point for the extension\n * @param init Initial values for the request\n * @returns The response body interpreted as JSON\n */\nexport async function requestAPI<T>(\n  endPoint = '',\n  init: RequestInit = {}\n): Promise<T> {\n  // Make request to Jupyter API\n  const settings = ServerConnection.makeSettings();\n  const requestUrl = URLExt.join(\n    settings.baseUrl,\n    'pwb-jupyterlab', // API Namespace\n    endPoint\n  );\n\n  let response: Response;\n  try {\n    response = await ServerConnection.makeRequest(requestUrl, init, settings);\n  } catch (error) {\n    throw new ServerConnection.NetworkError(error as any);\n  }\n\n  let data: any = await response.text();\n\n  if (data.length > 0) {\n    try {\n      data = JSON.parse(data);\n    } catch (error) {\n      console.log('Not a JSON response body.', response);\n    }\n  }\n\n  if (!response.ok) {\n    throw new ServerConnection.ResponseError(response, data.message || data);\n  }\n\n  return data;\n}\n","/*\n * index.ts\n *\n * Copyright (C) 2022 by Posit Software, PBC\n *\n */\n\nimport rstudioHome from '../images/posit-icon-fullcolor.svg';\nimport rstudioPanel from '../images/posit-icon-unstyled.svg';\n\nimport { PositWorkbenchWidget } from './widget';\n\nimport { Panel, Widget } from '@lumino/widgets';\nimport { JupyterFrontEnd, JupyterFrontEndPlugin } from '@jupyterlab/application';\nimport { ICommandPalette } from '@jupyterlab/apputils';\nimport { LabIcon } from '@jupyterlab/ui-components';\nimport { ServerConnection } from '@jupyterlab/services';\nimport { heartbeat, stopHeartbeat } from './disconnectMonitor';\nimport { setupDisconnectNotification } from './disconnectAlert';\n\nlet homeUrl: string = '/home';\n\nconst rstudioIcon = new LabIcon({\n  name: 'pwb_jupyterlab:home-icon',\n  svgstr: rstudioHome,\n});\n\nconst rstudioPanelIcon = new LabIcon({\n  name: 'pwb_jupyterlab:panel-icon',\n  svgstr: rstudioPanel,\n});\n\nfunction returnHome(): void {\n  location.assign(homeUrl);\n}\n\nfunction returnHomeNewTab(): void {\n  window.open(homeUrl, '_blank');\n}\n\nfunction registerCommands(app: JupyterFrontEnd, palette: ICommandPalette): void {\n  var regex = /(s\\/[\\w]{5}[\\w]{8}[\\w]{8}\\/)/g;\n  const settings = ServerConnection.makeSettings();\n  homeUrl = settings.baseUrl.replace(regex, 'home/');\n\n  // Register command to return to Posit Workbench home\n  const command = 'pwb_jupyterlab:return-home';\n  app.commands.addCommand(command, {\n    label: 'Return to Posit Workbench Home',\n    caption: 'Return to Posit Workbench Home',\n    execute: returnHome\n  });\n  palette.addItem({ command, category: 'Posit Workbench' });\n}\n\nfunction addPositIcon(app: JupyterFrontEnd): void {\n  // Add Posit icon that returns the user to home to menu bar\n  const rstudio_widget = new Widget();\n  rstudio_widget.id = 'rsw-icon';\n  rstudio_widget.node.onclick = returnHome;\n\n  rstudioIcon.element({\n    container: rstudio_widget.node,\n    margin: '2px 5px 2px 5px',\n    height: 'auto',\n    width: '20px',\n  });\n  app.shell.add(rstudio_widget, 'top', { rank: 1 });\n}\n\nfunction addSideBar(app: JupyterFrontEnd): void{\n  // Add the RSW side bar widget to the left panel\n  const panel = new Panel();\n  panel.id = 'Posit-Workbench-tab';\n  panel.title.icon = rstudioPanelIcon;\n  panel.addWidget(new PositWorkbenchWidget());\n  app.shell.add(panel, 'left', { rank: 501 });\n}\n\nfunction activate(app: JupyterFrontEnd, palette: ICommandPalette) {\n  registerCommands(app, palette);\n  addPositIcon(app);\n  addSideBar(app);\n  heartbeat(returnHomeNewTab);\n  setupDisconnectNotification();\n}\n\nfunction deactivate() {\n  stopHeartbeat();\n}\n\n/**\n * Initialization data for the pwb_jupyterlab extension.\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: 'pwb_jupyterlab:plugin',\n  description: 'Enhance experience of running JupyterLab in Posit Workbench.',\n  autoStart: true,\n  requires: [ICommandPalette],\n  activate: activate,\n  deactivate: deactivate\n};\n\nexport default plugin;\n","/*\n * proxiedServersComponent.tsx\n *\n * Copyright (C) 2022 by Posit Software, PBC\n *\n */\n\n// This file shares variables with './pwb_jupyterlab/constants.py'\nimport React, { Fragment } from 'react';\nimport { launcherIcon } from '@jupyterlab/ui-components';\n\nconst TitleComponent = (props: { title: string }): JSX.Element => {\n  const headerId = ('title_component_' + props.title).replace(/\\s+/g, '_');\n  return (\n    <div>\n      <header id={headerId}>{props.title}</header>\n    </div>\n  );\n};\n\nconst ServerComponent = (props: { server: Server }): JSX.Element => {\n  const hyperlinkId = 'server_link_' + props.server.html_id;\n  const liId = 'server_component_' + props.server.html_id;\n  const serverNameId = 'server_name_' + props.server.html_id;\n  const serverInfoId = 'server_info_' + props.server.html_id;\n  return ( \n    <Fragment aria-role='link' aria-label={'Open link for proxied server ' + props.server.label}>\n      <a id={hyperlinkId} target=\"_blank\" title={props.server.title} href={props.server.securePath}>\n        <li id={liId}>\n          <launcherIcon.react paddingRight={5}/>\n          <span id={serverNameId} className='jp-ServerName'>{props.server.label}</span>\n          <span id={serverInfoId} className='jp-ServerInfo'>{props.server.ip}:{props.server.port}</span>\n        </li>\n      </a>\n    </Fragment>\n  );\n}\n\nexport interface ProxiedServersProps {\n  servers: Array<Server>;\n}\n\nexport interface ProxiedServersState {}\n\nexport const ProxiedServersComponent = (props: ProxiedServersProps): JSX.Element => {\n  \n  const serverItems = props.servers.map((server) =>\n    <ServerComponent server={server} key={server.pid}/>\n  );\n\n  return(\n    <Fragment>\n      <TitleComponent title='Proxied Servers'/>\n      <div>\n        <ul id='proxied_servers_list'>\n          {serverItems}\n        </ul>\n      </div>\n    </Fragment>\n  );\n}\n\nexport class Server {\n  readonly pid: number;\n  readonly label: string;\n  readonly port: number;\n  readonly securePath: string;\n  readonly ip: string;\n  readonly title: string;\n  readonly html_id: string;\n\n  constructor(pid: number, name: string, port: number, ip: string, securePath: string) {\n    this.pid = pid;\n    this.label = name;\n    this.port = port;\n    this.ip = ip;\n    this.securePath = securePath;\n    this.title = securePath && securePath != '' ? securePath : 'Could not create secure url.';\n\n    let id_str = this.label + '_' +  port\n    id_str = id_str.replace(/\\s+|-/g, '_'); // replace spaces with an underscore\n    this.html_id = id_str.replace(/_+/g, '_'); // remove any duplicated underscores\n  }\n};\n","/*\n * widget.tsx\n *\n * Copyright (C) 2022 by Posit Software, PBC\n *\n */\n\n// This file shares variables with './pwb_jupyterlab/constants.py'\nimport { kServerEndpoint, kUrlEndpoint } from './constants';\nimport { requestAPI } from './handler';\nimport { ProxiedServersComponent, Server } from './proxiedServersComponent';\n\nimport { ReactWidget, UseSignal } from '@jupyterlab/apputils';\nimport { Message } from '@lumino/messaging';\nimport { ISignal, Signal } from '@lumino/signaling';\nimport React from 'react';\n\nfunction UseSignalComponent(props: { signal: ISignal<PositWorkbenchWidget, Server[]>, servers: Array<Server> }) {\n  return (\n    <UseSignal \n      signal={props.signal} \n      initialArgs={props.servers}>\n      { \n        (_, servers) => {\n            if (servers !== undefined) {\n                return <ProxiedServersComponent servers={servers} />;\n            } else {\n                // Handle the case where servers is undefined\n                return null; // or another fallback component\n            }\n        }\n      }\n    </UseSignal>\n  );\n}\n\nexport class PositWorkbenchWidget extends ReactWidget {\n  public servers: Map<number, Server[]> = new Map<number, Server[]>();\n  private _timerID: NodeJS.Timeout | undefined;\n  private _signal = new Signal<this, Server[]>(this);\n  private _serverString: string = '';\n  private _sessionUrl: string = '';\n\n  constructor() {\n    super();\n    this.addClass('jp-PositWorkbenchWidget');\n  }\n\n  private getSessionUrl(): void {\n    requestAPI<any>(kUrlEndpoint).then((response) => {\n      try {\n        this._sessionUrl = response.baseSessionUrl;\n      } catch (error) {\n        console.log(`Received invalid response on GET /pwb-jupyterlab/url. \\n${error}`);\n      }\n    }, (error) => {\n      console.log(`Error on GET /pwb-jupyterlab/url. \\n${error}`);\n    });\n  }\n\n  private requestServers(): void {\n    requestAPI<any>(kServerEndpoint).then((response) => {\n      if (JSON.stringify(response.servers) != this._serverString) {\n        this._serverString = JSON.stringify(response.servers);\n        this.servers.clear();\n        try {\n          response.servers.forEach((server: { pid: number; label: string; port: number; ip: string; secure_port: any; }) => {\n            this.servers.set(server.pid, [new Server(server.pid, server.label, server.port, server.ip, `${this._sessionUrl}p/${server.secure_port}/`)]);\n          });\n          this._signal.emit(this.getServers());\n        } catch (error) {\n          console.log(`Received invalid response on GET /pwb-jupyterlab/servers. \\n${response}`);\n          return;\n        }\n      }\n    }, (error)=> {\n      console.log(`Error on GET /pwb-jupyterlab/servers. \\n${error}`);\n    });\n  }\n\n  protected onAfterAttach(msg: Message): void {\n    super.onAfterAttach(msg);\n    this.requestServers();\n  }\n\n  protected onBeforeShow(msg: Message): void {\n    super.onBeforeShow(msg);\n    this.getSessionUrl();\n    this.requestServers();\n    this._timerID = setInterval(() => this.requestServers(), 3000);\n  }\n\n  protected onAfterHide(msg: Message): void {\n    super.onAfterHide(msg);\n    if (this._timerID !== undefined) {\n      clearInterval(this._timerID);\n    }\n  }\n\n  private getServers(): Array<Server> {\n    let serverArray: Array<Server> = [];\n    this.servers.forEach((value: Server[], key: number) => {\n      serverArray = serverArray.concat(value);\n    });\n    return serverArray;\n  }\n\n  render(): JSX.Element {\n    return (\n      <UseSignalComponent \n        signal={this._signal} \n        servers={...this.getServers()} \n      />\n    );\n  }\n}\n"],"names":[],"sourceRoot":""}