import{D2 as c}from"https://esm.sh/@terrastruct/d2@0.1.23";var d="index";async function p(e,r,t){let o=await e.compile(r,{options:t,inputPath:d});return e.render(o.diagram,{...o.renderOptions,...t})}var y=()=>{let e=new c;return{async render({model:r,el:t}){let o=()=>r.get("diagram"),i=()=>r.get("options"),a=n=>{r.set("_svg",n),r.save_changes()},s=async()=>{try{let n=await p(e,o(),i());a(n),t.innerHTML=n,t.classList.add("d2-widget")}catch(n){console.error(n);let g=n instanceof Error?n.message:"Unknown error";t.innerHTML=`<div class="error">Error generating diagram: ${g}</div>`}};r.on("change:diagram",s),r.on("change:options",s),await s()}}};export{y as default};
