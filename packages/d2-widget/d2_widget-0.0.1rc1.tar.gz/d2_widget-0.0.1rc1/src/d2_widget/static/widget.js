import{D2 as c}from"https://esm.sh/@terrastruct/d2@0.1.23-nightly.20250328.0b2203c10";async function d(o,r,e){let t=await o.compile(r,{options:e});return o.render(t.diagram,{...t.renderOptions,...e})}var u=()=>{let o=new c;return{async render({model:r,el:e}){let t=()=>r.get("diagram"),i=()=>r.get("options"),a=n=>{r.set("_svg",n),r.save_changes()},s=async()=>{try{let n=await d(o,t(),i());a(n),e.innerHTML=n,e.classList.add("d2-widget")}catch(n){console.error(n);let g=n instanceof Error?n.message:"Unknown error";e.innerHTML=`<div class="error">Error generating diagram: ${g}</div>`}};r.on("change:diagram",s),r.on("change:options",s),await s()}}};export{u as default};
