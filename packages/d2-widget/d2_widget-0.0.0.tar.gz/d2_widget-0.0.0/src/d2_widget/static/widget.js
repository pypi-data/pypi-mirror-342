import{D2 as c}from"https://esm.sh/@terrastruct/d2@0.1.23-nightly.20250328.0b2203c10";async function d(e,r,o){let t=await e.compile(r,{options:o});return e.render(t.diagram,t.renderOptions)}var u=()=>{let e=new c;return{async render({model:r,el:o}){let t=()=>r.get("diagram"),i=()=>r.get("options"),a=n=>{r.set("_svg",n),r.save_changes()},s=async()=>{try{let n=await d(e,t(),i());a(n),o.innerHTML=n,o.classList.add("d2-widget")}catch(n){console.error(n);let g=n instanceof Error?n.message:"Unknown error";o.innerHTML=`<div class="error">Error generating diagram: ${g}</div>`}};r.on("change:diagram",s),r.on("change:options",s),await s()}}};export{u as default};
