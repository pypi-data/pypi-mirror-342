(()=>{var e={};e.id=892,e.ids=[892],e.modules={2539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"70b3f872d71c98ede88bf23a0dbd8c883fc07336e0":()=>d});var s=r(61025);r(37133);var a=r(95705),n=r(95806);async function d(e,t,r){try{let s=await (await (0,a.K)()).POST("/datasets/{dataset_id}/shardsets/{shardset_id}/sync",{params:{path:{dataset_id:e,shardset_id:t}},body:{overwrite:r}});if(s.error){let e="Unknown error";return"string"==typeof s.error.detail&&(e=s.error.detail),{success:!1,error:e}}return(0,n.revalidatePath)(`/datasets/${e}/shardsets/${t}`),{success:!0,data:s.data}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An unexpected error occurred"}}}(0,r(51221).D)([d]),(0,s.A)(d,"70b3f872d71c98ede88bf23a0dbd8c883fc07336e0",null)},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22411:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9452,23)),Promise.resolve().then(r.bind(r,84526)),Promise.resolve().then(r.bind(r,36493))},23013:(e,t,r)=>{"use strict";r.d(t,{BT:()=>i,Wu:()=>o,ZB:()=>l,Zp:()=>n,aR:()=>d,wL:()=>c});var s=r(59777);r(98580);var a=r(53028);function n({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function d({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("flex flex-col gap-1.5 px-6",e),...t})}function l({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...t})}function i({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...t})}function o({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...t})}function c({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6",e),...t})}},27166:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(76939),a=r(62861),n=r(35848),d=r(67519),l=r(87170),i=r.n(l),o=r(52952),c=r(65479);async function u({params:e}){let{dataset_id:t,shardset_id:r}=await e,l=await (await (0,n.K)()).GET("/datasets/{dataset_id}/shardsets/{shardset_id}",{params:{path:{dataset_id:t,shardset_id:r}}});if(l.error)return(0,s.jsx)(d.ErrorCard,{error:l.error.detail});let u=l.data;return(0,s.jsxs)("main",{className:"container flex w-full flex-1 flex-col items-center justify-center space-y-8 py-10",children:[(0,s.jsxs)("div",{className:"w-full flex flex-col gap-1",children:[(0,s.jsx)("div",{className:"text-lg",children:u.location}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:u.id}),(0,s.jsx)(i(),{href:`/datasets/${u.dataset_id}`,children:(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["dataset: ",u.dataset_id]})})]}),(0,s.jsx)("div",{className:"w-full flex flex-col gap-2",children:(0,s.jsx)(o.SyncShardsetButton,{dataset_id:t,shardset_id:r})}),(0,s.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"text-lg",children:"Columns"}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[u.columns.length," columns"]}),(0,s.jsx)(c.Zp,{className:"w-full",children:(0,s.jsx)(c.Wu,{children:(0,s.jsxs)(a.XI,{children:[(0,s.jsx)(a.A0,{children:(0,s.jsxs)(a.Hj,{children:[(0,s.jsx)(a.nd,{className:"w-[100px]",children:"Name"}),(0,s.jsx)(a.nd,{children:"Type"}),(0,s.jsx)(a.nd,{children:"Description"})]})}),(0,s.jsx)(a.BF,{children:u.columns.map(e=>(0,s.jsxs)(a.Hj,{children:[(0,s.jsx)(a.nA,{children:e.name}),(0,s.jsx)(a.nA,{children:e.type})]},e.id))})]})})})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"text-lg",children:"Shards"}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[u.shard_count," shards, ",u.total_samples," samples"]}),(0,s.jsx)(c.Zp,{className:"w-full",children:(0,s.jsx)(c.Wu,{children:(0,s.jsxs)(a.XI,{children:[(0,s.jsx)(a.A0,{children:(0,s.jsxs)(a.Hj,{children:[(0,s.jsx)(a.nd,{className:"w-[100px]",children:"ID"}),(0,s.jsx)(a.nd,{children:"Index"}),(0,s.jsx)(a.nd,{children:"Location"}),(0,s.jsx)(a.nd,{children:"Format"}),(0,s.jsx)(a.nd,{children:"Samples"}),(0,s.jsx)(a.nd,{children:"Filesize"})]})}),(0,s.jsx)(a.BF,{children:u.shards.sort((e,t)=>e.index-t.index).map(e=>(0,s.jsxs)(a.Hj,{children:[(0,s.jsx)(a.nA,{className:"font-mono text-xs",children:e.id}),(0,s.jsx)(a.nA,{children:e.index}),(0,s.jsx)(a.nA,{children:e.location}),(0,s.jsx)(a.nA,{children:e.format}),(0,s.jsx)(a.nA,{children:e.samples}),(0,s.jsx)(a.nA,{children:e.filesize})]},e.id))})]})})})]})]})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29298:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(30885),a=r(53833);function n(...e){return(0,a.QP)((0,s.$)(e))}},33873:e=>{"use strict";e.exports=require("path")},35848:(e,t,r)=>{"use strict";r.d(t,{K:()=>d});var s=r(50164),a=r(18385),n=r(302);let d=async()=>{let e=process.env.API_URL||"http://localhost:8000",t=await (0,a.UL)(),r=t.get("lavender-data-api-key")?.value;return(0,s.Ay)({baseUrl:e,headers:r?{Authorization:`Basic ${r}`}:{},fetch:async e=>{let t=await fetch(e,{cache:"no-store"});return(401===t.status||403===t.status)&&(0,n.redirect)("/set-api-key"),t}})}},36363:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>d.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>o});var s=r(14125),a=r(29466),n=r(63940),d=r.n(n),l=r(339),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let o={children:["",{children:["datasets",{children:["[dataset_id]",{children:["shardsets",{children:["[shardset_id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,27166)),"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/datasets/[dataset_id]/shardsets/[shardset_id]/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,74723)),"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7376,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,97801,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,31318,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/datasets/[dataset_id]/shardsets/[shardset_id]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/datasets/[dataset_id]/shardsets/[shardset_id]/page",pathname:"/datasets/[dataset_id]/shardsets/[shardset_id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},36493:(e,t,r)=>{"use strict";r.d(t,{ErrorCard:()=>i});var s=r(59777),a=r(23013),n=r(57860),d=r(56787),l=r(32171);function i({error:e,returnBtn:t}){let r=(0,d.useRouter)();return(0,s.jsx)("div",{className:"my-8 w-full flex flex-row justify-center",children:(0,s.jsxs)(a.Zp,{className:"w-[480px]",children:[(0,s.jsxs)(a.aR,{children:[(0,s.jsx)(a.ZB,{children:(0,s.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,s.jsx)(n.A,{className:"w-4 h-4 text-red-700"}),(0,s.jsx)("div",{children:"Error"})]})}),(0,s.jsx)(a.BT,{children:"Please contact support if the problem persists."})]}),(0,s.jsx)(a.Wu,{children:(0,s.jsx)("p",{children:"string"==typeof e?e:JSON.stringify(e)})}),t&&(0,s.jsx)(a.wL,{children:(0,s.jsx)("div",{className:"w-full flex flex-row gap-2 justify-end",children:(0,s.jsx)(l.$,{variant:"outline",onClick:()=>r.back(),children:"Return"})})})]})})}},46080:(e,t,r)=>{"use strict";r.d(t,{Indicator:()=>y,Root:()=>g});var s=r(98580),a=r(3205),n=r(23979),d=r(59777),l="Progress",[i,o]=(0,a.A)(l),[c,u]=i(l),h=s.forwardRef((e,t)=>{var r,s;let{__scopeProgress:a,value:l=null,max:i,getValueLabel:o=f,...u}=e;(i||0===i)&&!j(i)&&console.error((r=`${i}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let h=j(i)?i:100;null===l||b(l,h)||console.error((s=`${l}`,`Invalid prop \`value\` of value \`${s}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let x=b(l,h)?l:null,p=v(x)?o(x,h):void 0;return(0,d.jsx)(c,{scope:a,value:x,max:h,children:(0,d.jsx)(n.sG.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":v(x)?x:void 0,"aria-valuetext":p,role:"progressbar","data-state":m(x,h),"data-value":x??void 0,"data-max":h,...u,ref:t})})});h.displayName=l;var x="ProgressIndicator",p=s.forwardRef((e,t)=>{let{__scopeProgress:r,...s}=e,a=u(x,r);return(0,d.jsx)(n.sG.div,{"data-state":m(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});function f(e,t){return`${Math.round(e/t*100)}%`}function m(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function v(e){return"number"==typeof e}function j(e){return v(e)&&!isNaN(e)&&e>0}function b(e,t){return v(e)&&!isNaN(e)&&e<=t&&e>=0}p.displayName=x;var g=h,y=p},52952:(e,t,r)=>{"use strict";r.d(t,{SyncShardsetButton:()=>s});let s=(0,r(18445).registerClientReference)(function(){throw Error("Attempted to call SyncShardsetButton() from the server but SyncShardsetButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/datasets/[dataset_id]/shardsets/[shardset_id]/sync-shardset-button.tsx","SyncShardsetButton")},62861:(e,t,r)=>{"use strict";r.d(t,{A0:()=>d,BF:()=>l,Hj:()=>i,XI:()=>n,nA:()=>c,nd:()=>o});var s=r(76939);r(93294);var a=r(29298);function n({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...t})})}function d({className:e,...t}){return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...t})}function l({className:e,...t}){return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...t})}function i({className:e,...t}){return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function o({className:e,...t}){return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function c({className:e,...t}){return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65479:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>d,Zp:()=>n,wL:()=>l});var s=r(76939);r(93294);var a=r(29298);function n({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function d({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...t})}function l({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6",e),...t})}},67519:(e,t,r)=>{"use strict";r.d(t,{ErrorCard:()=>s});let s=(0,r(18445).registerClientReference)(function(){throw Error("Attempted to call ErrorCard() from the server but ErrorCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/components/error-card.tsx","ErrorCard")},84526:(e,t,r)=>{"use strict";r.d(t,{SyncShardsetButton:()=>p});var s=r(59777),a=r(98580),n=r(32171);let d=(0,r(84206).A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var l=r(40605);let i=(0,l.createServerReference)("70b3f872d71c98ede88bf23a0dbd8c883fc07336e0",l.callServer,void 0,l.findSourceMapURL,"syncShardset");var o=r(46080),c=r(53028);function u({className:e,value:t,...r}){return(0,s.jsx)(o.Root,{"data-slot":"progress",className:(0,c.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:(0,s.jsx)(o.Indicator,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}var h=r(56787),x=r(44950);function p({dataset_id:e,shardset_id:t}){let[r,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(null);(0,h.useRouter)();let p=async()=>{try{let r=await (0,x.K)(e,t);l(r)}catch(e){console.error("error",e),l(null)}},f=async()=>{await i(e,t,!0),await p(),c(setInterval(()=>p(),100))};return(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"h-4",children:r&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u,{className:"w-80",value:r.shard_count>0?100*r.done_count/r.shard_count:0}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:r.shard_count>0?`${r.done_count} / ${r.shard_count}`:""}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:r.status})]})}),(0,s.jsx)("form",{action:f,children:(0,s.jsxs)(n.$,{type:"submit",disabled:!!r,children:[(0,s.jsx)(d,{className:"w-4 h-4"}),"Sync"]})})]})}},85459:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,87170,23)),Promise.resolve().then(r.bind(r,52952)),Promise.resolve().then(r.bind(r,67519))},95705:(e,t,r)=>{"use strict";r.d(t,{K:()=>d,m:()=>l});var s=r(39717),a=r(51542),n=r(72795);let d=async()=>{let e=process.env.API_URL||"http://localhost:8000",t=await (0,a.UL)(),r=t.get("lavender-data-api-key")?.value;return(0,s.Ay)({baseUrl:e,headers:r?{Authorization:`Basic ${r}`}:{},fetch:async e=>{let t=await fetch(e,{cache:"no-store"});return(401===t.status||403===t.status)&&(0,n.redirect)("/set-api-key"),t}})},l=async e=>{let t=process.env.API_URL||"http://localhost:8000";return(0,s.Ay)({baseUrl:t,headers:{Authorization:`Basic ${e}`},fetch:async e=>fetch(e,{cache:"no-store"})})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[232,732,745,14,111,631,719],()=>r(36363));module.exports=s})();