(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5979],{23663:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests/configure/storage",function(){return n(49755)}])},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(24246),s=n(77181),r=n(88038),a=n.n(r),o=n(86677);n(27378);var l=n(25980),u=n(90867),c=n(77830),d=()=>{let e=(0,o.useRouter)();return(0,i.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.xuv,{children:[(0,i.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.wpx,{onClick:()=>{e.push(c.fz)},children:"Configure"})]}),(0,i.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},g=e=>{let{children:t,title:n,padded:r=!0,mainProps:c}=e,g=(0,l.hz)(),p=(0,o.useRouter)(),f="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,m=!(g.flags.privacyRequestsConfiguration&&f),{data:h}=(0,u.JE)(void 0,{skip:m}),{data:v}=(0,u.PW)(void 0,{skip:m}),x=g.flags.privacyRequestsConfiguration&&(!h||!v)&&f;return(0,i.jsxs)(s.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(a(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.kCb,{as:"main",direction:"column",py:r?6:0,px:r?10:0,h:r?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[x?(0,i.jsx)(d,{}):null,t]})]})}},58754:function(e,t,n){"use strict";var i=n(24246),s=n(77181),r=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:a=!0,children:o,rightContent:l,style:u,...c}=e;return(0,i.jsxs)("div",{...c,style:a?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...u}:{paddingBottom:"24px",...u},children:[(0,i.jsxs)(s.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(s.X6q,{className:n||o?"pb-4":void 0,fontSize:"2xl","data-testid":"page-heading",children:t}):t,l&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,i.jsx)(r.m,{className:o?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),o]})}},97181:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var i=n(24246),s=n(77181),r=n(34090),a=n(27378),o=n(91613),l=n(40324);let u=e=>{let{name:t,label:n,labelProps:u,tooltip:c,isRequired:d,layout:g="inline",...p}=e,[f,m,{setValue:h}]=(0,r.U$)(t),v=!!(m.touched&&m.error),[x,y]=(0,a.useState)("");f.value||"tags"!==p.mode&&"multiple"!==p.mode||(f.value=[]),"tags"===p.mode&&"string"==typeof f.value&&(f.value=[f.value]);let j="tags"===p.mode?(e,t)=>e?e.value!==x||f.value.includes(x)?p.optionRender?p.optionRender(e,t):e.label:'Create "'.concat(x,'"'):void 0:p.optionRender||void 0,_=e=>{y(e),p.onSearch&&p.onSearch(e)},b=(e,t)=>{h(e),p.onChange&&p.onChange(e,t)};return"inline"===g?(0,i.jsx)(s.NIc,{isInvalid:v,isRequired:d,children:(0,i.jsxs)(s.rjZ,{templateColumns:n?"1fr 3fr":"1fr",children:[n?(0,i.jsx)(l.__,{htmlFor:p.id||t,...u,children:n}):null,(0,i.jsxs)(s.jqI,{align:"center",children:[(0,i.jsxs)(s.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,i.jsx)(s.WPr,{...f,id:p.id||t,"data-testid":"controlled-select-".concat(f.name),...p,optionRender:j,onSearch:"tags"===p.mode?_:void 0,onChange:b,value:f.value||void 0,status:v?"error":void 0}),(0,i.jsx)(l.Bc,{isInvalid:v,message:m.error,fieldName:f.name})]}),c?(0,i.jsx)(o.Z,{label:c}):null]})]})}):(0,i.jsx)(s.NIc,{isInvalid:v,isRequired:d,children:(0,i.jsxs)(s.gCW,{alignItems:"start",children:[(0,i.jsxs)(s.jqI,{align:"center",children:[n?(0,i.jsx)(l.__,{htmlFor:p.id||t,fontSize:"xs",my:0,mr:1,...u,children:n}):null,c?(0,i.jsx)(o.Z,{label:c}):null]}),(0,i.jsx)(s.WPr,{...f,id:p.id||t,"data-testid":"controlled-select-".concat(f.name),...p,optionRender:j,onSearch:"tags"===p.mode?_:void 0,onChange:b,value:f.value||void 0,status:v?"error":void 0}),(0,i.jsx)(l.Bc,{isInvalid:v,message:m.error,fieldName:f.name})]})})}},812:function(e,t,n){"use strict";n.d(t,{D4:function(){return r.D4},MM:function(){return g},Ot:function(){return u},c6:function(){return s},cj:function(){return f},e$:function(){return o},fn:function(){return l},iC:function(){return p},nU:function(){return d},tB:function(){return c}});var i,s,r=n(19043);let a="An unexpected error occurred. Please try again.",o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,r.Bw)(e)){if((0,r.hE)(e.data))return e.data.detail;if((0,r.cz)(e.data)){var n;let t=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null==t?void 0:t.msg,": ").concat(null==t?void 0:t.loc)}if(409===e.status&&(0,r.Dy)(e.data)||404===e.status&&(0,r.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function l(e){return"object"==typeof e&&null!=e&&"status"in e}function u(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function c(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:a};if((0,r.oK)(e))return{status:e.originalStatus,message:e.data};if((0,r.Bw)(e)){let{status:n}=e;return{status:n,message:o(e,t.message)}}return t},g=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(i=s||(s={})).GVL="gvl",i.AC="gacp",i.COMPASS="compass";let p={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},f=e=>{let t=e.split(".")[0];return"gacp"===t?"gacp":"gvl"===t?"gvl":"compass"}},14047:function(e,t,n){"use strict";n.d(t,{H:function(){return r},V:function(){return i.V}});var i=n(84306),s=n(812);let r=()=>{let{errorAlert:e}=(0,i.V)();return{handleError:t=>{let n="An unexpected error occurred. Please try again.";(0,s.Ot)(t)?n=t.data.detail:(0,s.tB)(t)&&(n=t.data.detail[0].msg),e(n)}}}},84306:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var i=n(24246),s=n(77181);let r=()=>{let e=(0,s.pmc)();return{errorAlert:(t,n,r)=>{let a={...r,position:(null==r?void 0:r.position)||"top",render:e=>{let{onClose:r}=e;return(0,i.jsxs)(s.bZj,{alignItems:"normal",status:"error","data-testid":"error-alert",children:[(0,i.jsx)(s.zMQ,{}),(0,i.jsxs)(s.xuv,{children:[n&&(0,i.jsx)(s.CdC,{children:n}),(0,i.jsx)(s.XaZ,{children:t})]}),(0,i.jsx)(s.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}};(null==r?void 0:r.id)&&e.isActive(r.id)?e.update(r.id,a):e(a)},successAlert:(t,n,r)=>{let a={...r,position:(null==r?void 0:r.position)||"top",render:e=>{let{onClose:r}=e;return(0,i.jsxs)(s.bZj,{alignItems:"normal",status:"success",variant:"subtle","data-testid":"success-alert",children:[(0,i.jsx)(s.zMQ,{}),(0,i.jsxs)(s.xuv,{children:[n&&(0,i.jsx)(s.CdC,{children:n}),(0,i.jsx)(s.XaZ,{children:t})]}),(0,i.jsx)(s.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}};(null==r?void 0:r.id)&&e.isActive(r.id)?e.update(r.id,a):e(a)}}}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return u}});var i=n(24246),s=n(77181),r=n(79894),a=n.n(r),o=n(27378);let{Text:l}=s.AntTypography,u=e=>{let{items:t,...n}=e,r=(0,o.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let r=n===t.length-1,o={...e},u=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,i.jsx)(l,{style:{color:"inherit",maxWidth:r?void 0:400},ellipsis:!r,children:o.title})),u)?o.title=(0,i.jsx)(s.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,i.jsx)(a(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,i.jsx)(s.zrq,{items:r,...n})}},7426:function(e,t,n){"use strict";n.d(t,{D2:function(){return g},L:function(){return o},U7:function(){return u},Yh:function(){return f},ak:function(){return l},iR:function(){return h},km:function(){return a},tB:function(){return r}});var i=n(3228);let s=n(78780).u.injectEndpoints({endpoints:e=>({getConfigurationSettings:e.query({query:e=>{let{api_set:t}=e;return{url:"/config",method:"GET",params:{api_set:t}}},providesTags:["Configuration Settings"]}),putConfigurationSettings:e.mutation({query:e=>({url:"/config",method:"PUT",body:e}),invalidatesTags:["Configuration Settings"]}),patchConfigurationSettings:e.mutation({query:e=>({url:"/config",method:"PATCH",body:e}),invalidatesTags:["Configuration Settings","Privacy Notices"]})})}),{useGetConfigurationSettingsQuery:r,usePutConfigurationSettingsMutation:a,usePatchConfigurationSettingsMutation:o}=s,l=(0,i.P1)([e=>e,s.endpoints.getConfigurationSettings.select({api_set:!0}),s.endpoints.getConfigurationSettings.select({api_set:!1})],(e,t,n)=>{var i,s,r;let{data:a}=t,{data:o}=n;return{configSet:{cors_origins:(null==o?void 0:null===(i=o.security)||void 0===i?void 0:i.cors_origins)||[],cors_origin_regex:null==o?void 0:null===(s=o.security)||void 0===s?void 0:s.cors_origin_regex},apiSet:{cors_origins:(null==a?void 0:null===(r=a.security)||void 0===r?void 0:r.cors_origins)||[]}}}),u=()=>(0,i.P1)([e=>e,s.endpoints.getConfigurationSettings.select({api_set:!0})],(e,t)=>{let{data:n}=t;return n}),c={enabled:!1,cmp_api_required:!1},d=(e,t,n,i)=>{let s=n&&n[e],r=i&&i[e];return s&&r?{...i[e],...n[e]}:r?i[e]:s?{...n[e]}:t},g=(0,i.P1)([e=>e,s.endpoints.getConfigurationSettings.select({api_set:!0}),s.endpoints.getConfigurationSettings.select({api_set:!1})],(e,t,n)=>{let{data:i}=t,{data:s}=n;return d("gpp",c,i,s)}),p={tcf_publisher_country_code:null},f=(0,i.P1)([e=>e,s.endpoints.getConfigurationSettings.select({api_set:!0}),s.endpoints.getConfigurationSettings.select({api_set:!1})],(e,t,n)=>{let{data:i}=t,{data:s}=n;return d("plus_consent_settings",p,i,s)}),m={allow_username_password_login:!1},h=(0,i.P1)([e=>e,s.endpoints.getConfigurationSettings.select({api_set:!0}),s.endpoints.getConfigurationSettings.select({api_set:!1})],(e,t,n)=>{let{data:i}=t,{data:s}=n;return d("plus_security_settings",m,i,s)})},71784:function(e,t,n){"use strict";n.d(t,{DE:function(){return l},I3:function(){return s},kN:function(){return a},qX:function(){return o},rE:function(){return r}});var i=n(62656);let s=[...new Map([[i.q2.APPROVED,"Approved"],[i.q2.CANCELED,"Canceled"],[i.q2.COMPLETE,"Completed"],[i.q2.DENIED,"Denied"],[i.q2.ERROR,"Error"],[i.q2.IN_PROCESSING,"In Progress"],[i.q2.PENDING,"New"],[i.q2.PAUSED,"Paused"],[i.q2.IDENTITY_UNVERIFIED,"Unverified"],[i.q2.REQUIRES_INPUT,"Requires input"]])].map(e=>{let[t,n]=e;return{label:n,value:t}}),r=new Map([[i.Us.ACCESS,"Access"],[i.Us.ERASURE,"Erasure"],[i.Us.CONSENT,"Consent"],[i.Us.UPDATE,"Update"]]),a=[...r].map(e=>{let[t,n]=e;return{label:n,value:t}}),o={mailgun:"mailgun",twilio_email:"twilio_email",twilio_text:"twilio_text"},l={local:"local",s3:"s3"}},49755:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i=n(24246),s=n(77181),r=n(27378),a=n(812),o=n(14047),l=n(77213),u=n(77830),c=n(58754),d=n(7426),g=n(71784),p=n(90867),f=n(34090),m=n(97181),h=n(40324),v=e=>{var t,n,l,u,c;let{storageDetails:d}=e,[v,x]=(0,r.useState)(""),[y]=(0,p.gC)(),[j]=(0,p.cf)(),{handleError:_}=(0,o.H)(),{successAlert:b}=(0,o.V)(),C={type:g.DE.s3,auth_method:null!==(l=null==d?void 0:null===(t=d.details)||void 0===t?void 0:t.auth_method)&&void 0!==l?l:"",bucket:null!==(u=null==d?void 0:null===(n=d.details)||void 0===n?void 0:n.bucket)&&void 0!==u?u:"",format:null!==(c=null==d?void 0:d.format)&&void 0!==c?c:""},S=async e=>{let t=await y({type:g.DE.s3,details:{auth_method:e.auth_method,bucket:e.bucket},format:e.format});(0,a.D4)(t)?_(t.error):(x(e.auth_method),b("S3 storage credentials successfully updated."))},w=async e=>{let t=await j({details:{aws_access_key_id:e.aws_access_key_id,aws_secret_access_key:e.aws_secret_access_key},type:g.DE.s3});(0,a.D4)(t)?_(t.error):b("S3 storage secrets successfully updated.")};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"S3 storage configuration"}),(0,i.jsx)(s.Kqy,{children:(0,i.jsx)(f.J9,{initialValues:C,onSubmit:S,enableReinitialize:!0,children:e=>{let{isSubmitting:t,handleReset:n}=e;return(0,i.jsxs)(f.l0,{children:[(0,i.jsxs)(s.Kqy,{mt:5,spacing:5,children:[(0,i.jsx)(m.d,{name:"format",label:"Format",options:[{label:"json",value:"json"},{label:"csv",value:"csv"}],"data-testid":"format",isRequired:!0}),(0,i.jsx)(m.d,{name:"auth_method",label:"Auth method",options:[{label:"secret_keys",value:"secret_keys"},{label:"automatic",value:"automatic"}],"data-testid":"auth_method",isRequired:!0}),(0,i.jsx)(h.j0,{"data-testid":"bucket",name:"bucket",label:"Bucket",isRequired:!0})]}),(0,i.jsx)(s.wpx,{onClick:()=>n(),className:"mr-2 mt-5",children:"Cancel"}),(0,i.jsx)(s.wpx,{htmlType:"submit",className:"mt-5",disabled:t,type:"primary","data-testid":"save-btn",children:"Save"})]})}})}),"secret_keys"===v?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.izJ,{mt:5}),(0,i.jsx)(s.X6q,{fontSize:"md",fontWeight:"semibold",mt:5,children:"Storage destination"}),(0,i.jsx)(s.Kqy,{children:(0,i.jsx)(f.J9,{initialValues:{aws_access_key_id:"",aws_secret_access_key:""},onSubmit:w,children:e=>{let{isSubmitting:t,handleReset:n}=e;return(0,i.jsxs)(f.l0,{children:[(0,i.jsxs)(s.Kqy,{mt:5,spacing:5,children:[(0,i.jsx)(h.j0,{name:"aws_access_key_id",label:"AWS access key ID"}),(0,i.jsx)(h.j0,{name:"aws_secret_access_key",label:"AWS secret access key",type:"password"})]}),(0,i.jsxs)(s.xuv,{mt:10,children:[(0,i.jsx)(s.wpx,{onClick:()=>n(),className:"mr-2 mt-5",children:"Cancel"}),(0,i.jsx)(s.wpx,{disabled:t,htmlType:"submit",type:"primary",className:"mt-5","data-testid":"save-btn",children:"Save"})]})]})}})})]}):null]})},x=()=>{let{successAlert:e}=(0,o.V)(),{handleError:t}=(0,o.H)(),[n,f]=(0,r.useState)(""),{data:m}=(0,p.PW)(),{data:h}=(0,p.Au)({type:n}),[x,{isLoading:y}]=(0,p.gC)(),[j]=(0,d.L)();(0,r.useEffect)(()=>{m&&f(m.type)},[m]);let _=async n=>{let{value:i}=n.target;if(i===g.DE.local){let n=await x({type:i,details:{},format:"json"});(0,a.D4)(n)?t(n.error):e("Configured storage details successfully.")}let s=await j({storage:{active_default_storage_type:i}});(0,a.D4)(s)?t(s.error):f(i)};return(0,i.jsxs)(l.Z,{title:"Configure Privacy Requests - Storage",children:[(0,i.jsx)(c.Z,{heading:"Privacy Requests",breadcrumbItems:[{title:"All requests",href:u.Jw},{title:"Configure requests",href:u.fz},{title:"Storage"}]}),(0,i.jsx)(s.X6q,{mb:5,fontSize:"md",fontWeight:"semibold",children:"Configure storage"}),(0,i.jsxs)(s.xuv,{display:"flex",flexDirection:"column",width:"50%",children:[(0,i.jsx)(s.xuv,{mb:5,children:"Fides requires a storage destination to store and share the results of privacy requests. For a production setup, it is highly recommended to have S3 as a storage destination. Ensure you have completed the setup for the storage destination and have the details handy prior to the following steps."}),(0,i.jsxs)(s.xuv,{children:["To configure a Storage destination, first choose a method to store your results. Fides currently supports"," ",(0,i.jsx)(s.xvT,{as:"span",color:"complimentary.500",children:"Local"})," ","and"," ",(0,i.jsx)(s.xvT,{as:"span",color:"complimentary.500",children:"S3"})," ","storage methods."]}),(0,i.jsx)(s.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"Choose storage type to configure"}),(0,i.jsx)(s.y02.Group,{disabled:y,onChange:_,value:n,"data-testid":"privacy-requests-storage-selection",className:"p-3",children:(0,i.jsxs)(s.jqI,{children:[(0,i.jsx)(s.y02,{value:"local","data-testid":"option-local",children:"Local"},"local"),(0,i.jsx)(s.y02,{value:"s3","data-testid":"option-s3",children:"S3"},"s3")]})}),"s3"===n&&h?(0,i.jsx)(v,{storageDetails:h}):null]})]})},y=()=>(0,i.jsx)(x,{})},19043:function(e,t,n){"use strict";n.d(t,{Bw:function(){return a},D4:function(){return s},Dy:function(){return l},XD:function(){return u},cz:function(){return c},hE:function(){return o},oK:function(){return r}});var i=n(76649);let s=e=>"error"in e,r=e=>(0,i.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,a=e=>(0,i.Ln)({status:"number",data:{}},e),o=e=>(0,i.Ln)({detail:"string"},e),l=e=>(0,i.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),u=e=>(0,i.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),c=e=>(0,i.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return i}});let i=(e,t)=>r(e,t),s=Symbol("SOME"),r=(e,t)=>"string"==typeof e?e===typeof t:Array.isArray(e)?s in e?e.some(e=>r(e,t)):!!Array.isArray(t)&&(0===e.length||t.every(t=>e.some(e=>r(e,t)))):"object"==typeof t&&null!==t&&Object.entries(e).every(([e,n])=>r(n,t[e]));class a{static narrow(e){return new a(t=>i(e,t))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){let t=this.NF,n=e instanceof a?e.NF:e instanceof Function?e:t=>i(e,t);return new a(e=>t(e)&&n(e))}}new a(e=>!0)}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=23663)}),_N_E=e.O()}]);