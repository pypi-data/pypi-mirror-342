(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4065],{70378:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/custom-fields",function(){return i(76513)}])},56358:function(e,t,i){"use strict";i.d(t,{q:function(){return s}});var l=i(24246);let s=(0,i(77181).IUT)({displayName:"TrashCanOutlineIcon",viewBox:"0 0 11 12",path:(0,l.jsx)("path",{d:"M4.5166 1.60859L4.1084 2.21875H7.22363L6.81543 1.60859C6.7832 1.56133 6.72949 1.53125 6.67148 1.53125H4.6584C4.60039 1.53125 4.54668 1.55918 4.51445 1.60859H4.5166ZM7.6748 1.03711L8.46328 2.21875H8.75977H9.79102H9.96289C10.2486 2.21875 10.4785 2.44863 10.4785 2.73438C10.4785 3.02012 10.2486 3.25 9.96289 3.25H9.79102V9.78125C9.79102 10.7309 9.02188 11.5 8.07227 11.5H3.25977C2.31016 11.5 1.54102 10.7309 1.54102 9.78125V3.25H1.36914C1.0834 3.25 0.853516 3.02012 0.853516 2.73438C0.853516 2.44863 1.0834 2.21875 1.36914 2.21875H1.54102H2.57227H2.86875L3.65723 1.03496C3.88066 0.701953 4.25664 0.5 4.6584 0.5H6.67148C7.07324 0.5 7.44922 0.701953 7.67266 1.03496L7.6748 1.03711ZM2.57227 3.25V9.78125C2.57227 10.1615 2.87949 10.4688 3.25977 10.4688H8.07227C8.45254 10.4688 8.75977 10.1615 8.75977 9.78125V3.25H2.57227ZM4.29102 4.625V9.09375C4.29102 9.28281 4.13633 9.4375 3.94727 9.4375C3.7582 9.4375 3.60352 9.28281 3.60352 9.09375V4.625C3.60352 4.43594 3.7582 4.28125 3.94727 4.28125C4.13633 4.28125 4.29102 4.43594 4.29102 4.625ZM6.00977 4.625V9.09375C6.00977 9.28281 5.85508 9.4375 5.66602 9.4375C5.47695 9.4375 5.32227 9.28281 5.32227 9.09375V4.625C5.32227 4.43594 5.47695 4.28125 5.66602 4.28125C5.85508 4.28125 6.00977 4.43594 6.00977 4.625ZM7.72852 4.625V9.09375C7.72852 9.28281 7.57383 9.4375 7.38477 9.4375C7.1957 9.4375 7.04102 9.28281 7.04102 9.09375V4.625C7.04102 4.43594 7.1957 4.28125 7.38477 4.28125C7.57383 4.28125 7.72852 4.43594 7.72852 4.625Z",fill:"currentColor"})})},95492:function(e,t,i){"use strict";i.d(t,{l:function(){return s}});var l=i(24246);let s=(0,i(77181).IUT)({displayName:"TrashCanSolidIcon",viewBox:"0 0 12 15",path:(0,l.jsx)("path",{d:"M8.37857 1.18083C8.23393 0.892838 7.93661 0.710938 7.6125 0.710938H4.3875C4.06339 0.710938 3.76607 0.892838 3.62143 1.18083L3.42857 1.56094H0.857143C0.383036 1.56094 -1.19209e-07 1.94158 -1.19209e-07 2.41094C-1.19209e-07 2.8803 0.383036 3.26094 0.857143 3.26094H11.1429C11.6162 3.26094 12 2.8803 12 2.41094C12 1.94158 11.6162 1.56094 11.1429 1.56094H8.57143L8.37857 1.18083ZM11.167 4.11094H0.857143V12.6109C0.857143 13.5486 1.62589 14.3109 2.57143 14.3109H9.45268C10.3754 14.3109 11.167 13.5486 11.167 12.6109V4.11094ZM9.02411 6.23594V12.1859C9.02411 12.4197 8.80714 12.6109 8.59554 12.6109C8.33571 12.6109 8.16696 12.4197 8.16696 12.1859V6.23594C8.16696 6.00219 8.33571 5.81094 8.59554 5.81094C8.80714 5.81094 9.02411 6.00219 9.02411 6.23594ZM6.45268 6.23594V12.1859C6.45268 12.4197 6.23571 12.6109 6.02411 12.6109C5.76429 12.6109 5.57143 12.4197 5.57143 12.1859V6.23594C5.57143 6.00219 5.76429 5.81094 6.02411 5.81094C6.23571 5.81094 6.45268 6.00219 6.45268 6.23594ZM3.85714 6.23594V12.1859C3.85714 12.4197 3.66429 12.6109 3.42857 12.6109C3.19286 12.6109 3 12.4197 3 12.1859V6.23594C3 6.00219 3.19286 5.81094 3.42857 5.81094C3.66429 5.81094 3.85714 6.00219 3.85714 6.23594Z",fill:"currentColor"})})},77213:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var l=i(24246),s=i(77181),n=i(88038),a=i.n(n),o=i(86677);i(27378);var r=i(25980),d=i(90867),c=i(77830),u=()=>{let e=(0,o.useRouter)();return(0,l.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,l.jsxs)(s.xuv,{children:[(0,l.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,l.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,l.jsx)(s.wpx,{onClick:()=>{e.push(c.fz)},children:"Configure"})]}),(0,l.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:i,padded:n=!0,mainProps:c}=e,p=(0,r.hz)(),x=(0,o.useRouter)(),m="/privacy-requests"===x.pathname||"/datastore-connection"===x.pathname,h=!(p.flags.privacyRequestsConfiguration&&m),{data:f}=(0,d.JE)(void 0,{skip:h}),{data:v}=(0,d.PW)(void 0,{skip:h}),g=p.flags.privacyRequestsConfiguration&&(!f||!v)&&m;return(0,l.jsxs)(s.kCb,{"data-testid":i,direction:"column",h:"100vh",children:[(0,l.jsxs)(a(),{children:[(0,l.jsxs)("title",{children:["Fides Admin UI - ",i]}),(0,l.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsxs)(s.kCb,{as:"main",direction:"column",py:n?6:0,px:n?10:0,h:n?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[g?(0,l.jsx)(u,{}):null,t]})]})}},58754:function(e,t,i){"use strict";var l=i(24246),s=i(77181),n=i(70788);t.Z=e=>{let{heading:t,breadcrumbItems:i,isSticky:a=!0,children:o,rightContent:r,style:d,...c}=e;return(0,l.jsxs)("div",{...c,style:a?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,l.jsxs)(s.jqI,{justify:"space-between",children:["string"==typeof t?(0,l.jsx)(s.X6q,{className:i||o?"pb-4":void 0,fontSize:"2xl","data-testid":"page-heading",children:t}):t,r&&(0,l.jsx)("div",{"data-testid":"page-header-right-content",children:r})]}),!!i&&(0,l.jsx)(n.m,{className:o?"pb-4":void 0,items:i,"data-testid":"page-breadcrumb"}),o]})}},19904:function(e,t,i){"use strict";i.d(t,{Tg:function(){return a}});var l=i(24246),s=i(16134),n=i(31793);let a=e=>(0,s.C)(n.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:i}=e;return a(t)?(0,l.jsx)(l.Fragment,{children:i}):null}},94799:function(e,t,i){"use strict";i.d(t,{k:function(){return n}});var l=i(76649);let s=e=>(0,l.Ln)({id:"string"},e),n=e=>(null!=e?e:[]).filter(s)},30320:function(e,t,i){"use strict";i.d(t,{m:function(){return r}});var l=i(27378),s=i(25980),n=i(14047),a=i(32885),o=i(94799);let r=e=>{let{resourceFidesKey:t,resourceType:i}=e,{errorAlert:r}=(0,n.V)(),{plus:d}=(0,s.hz)(),c=(0,l.useMemo)(()=>null!=t?t:"",[]),u=(0,a.YU)(!0,{skip:!d}),p=(0,a.VN)(i,{skip:!d}),{data:x,isLoading:m,error:h,isError:f}=(0,a.PV)(null!=t?t:"",{skip:""!==c&&!(d&&c)}),[v]=(0,a._D)(),g=u.isLoading||p.isLoading||m,j=(0,l.useMemo)(()=>new Map((0,o.k)(u.data).map(e=>{var t;return[e.id,{...e,options:(null!==(t=e.allowed_values)&&void 0!==t?t:[]).map(e=>({value:e,label:e}))}]})),[u.data]),C=(0,l.useMemo)(()=>{var e;return null===(e=p.data)||void 0===e?void 0:e.filter(e=>e.active)},[p.data]),_=(0,l.useMemo)(()=>new Map((0,o.k)(C).map(e=>[e.id,e])),[C]),b=(0,l.useMemo)(()=>f&&(null==h?void 0:h.status)===404?new Map:new Map((0,o.k)(x).map(e=>[e.custom_field_definition_id,e])),[x,f,h]),y=(0,l.useMemo)(()=>{let e=[..._.keys()];return e.sort(),e},[_]),T=(0,l.useMemo)(()=>{let e={};return C&&b&&C.forEach(t=>{let i=b.get(t.id||"");i&&(t.allow_list_id&&"string[]"===t.field_type?e[i.custom_field_definition_id]=i.value:e[i.custom_field_definition_id]=i.value.toString())}),e},[C,b]),w=(0,l.useCallback)(async e=>{if(!d)return;let l="fides_key"in e&&""!==e.fides_key?e.fides_key:t;if(!l)return;let{customFieldValues:s}=e;if(!s||0===Object.keys(s).length)return;let n=[],a=[];y.forEach(e=>{let t=b.get(e),i=s[e];void 0===i||""===i||Array.isArray(i)&&0===i.length?(null==t?void 0:t.id)&&a.push(t.id):n.push({custom_field_definition_id:e,resource_id:l,id:null==t?void 0:t.id,value:i})});try{await v({resource_type:i,resource_id:l,upsert:n,delete:a})}catch(e){r("One or more custom fields have failed to save, please try again."),console.error(e)}},[d,b,r,t,y,v,i]);return{customFieldValues:T,definitionIdToCustomField:b,idToAllowListWithOptions:j,idToCustomFieldDefinition:_,isEnabled:d,isLoading:g,sortedCustomFieldDefinitionIds:y,upsertCustomFields:w}}},70416:function(e,t,i){"use strict";i.d(t,{d:function(){return s}});var l=i(24246);let s=(0,i(77181).IUT)({displayName:"AddIcon",viewBox:"0 0 10 10",path:(0,l.jsx)("path",{d:"M4.33331 4.33398V0.333984H5.66665V4.33398H9.66665V5.66732H5.66665V9.66732H4.33331V5.66732H0.333313V4.33398H4.33331Z",fill:"currentColor"})})},95346:function(e,t,i){"use strict";i.d(t,{uc:function(){return v},Hn:function(){return r},Uv:function(){return a},C7:function(){return d},mZ:function(){return f.m}});var l,s,n,a,o=i(62656);(l=n||(n={}))[l.CREATE_CUSTOM_FIELDS=0]="CREATE_CUSTOM_FIELDS",l[l.CREATE_CUSTOM_LISTS=1]="CREATE_CUSTOM_LISTS",l[l.CHOOSE_FROM_LIBRARY=2]="CHOOSE_FROM_LIBRARY",o.AL.STRING,o.AL.STRING_,(s=a||(a={})).SINGLE_SELECT="singleSelect",s.MULTIPLE_SELECT="multipleSelect",s.OPEN_TEXT="openText";let r=[{label:"Single select",value:"singleSelect"},{label:"Multiple select",value:"multipleSelect"},{label:"Open Text",value:"openText"}],d=[{label:"taxonomy:".concat(o.P6.DATA_CATEGORY),value:o.P6.DATA_CATEGORY},{label:"taxonomy:".concat(o.P6.DATA_SUBJECT),value:o.P6.DATA_SUBJECT},{label:"taxonomy:".concat(o.P6.DATA_USE),value:o.P6.DATA_USE},{label:"".concat(o.P6.SYSTEM,":information"),value:o.P6.SYSTEM},{label:"system:data use",value:o.P6.PRIVACY_DECLARATION}];var c=i(24246),u=i(77181),p=i(34090),x=i(30234),m=i(97181),h=i(40324),f=i(30320);let v=e=>{let{resourceFidesKey:t,resourceType:i}=e,{idToAllowListWithOptions:l,idToCustomFieldDefinition:s,isEnabled:n,isLoading:a,sortedCustomFieldDefinitionIds:r}=(0,f.m)({resourceFidesKey:t,resourceType:i});return n&&0!==r.length?(0,c.jsx)(x.Z,{heading:"Custom fields",children:(0,c.jsx)(u.kCb,{flexDir:"column","data-testid":"custom-fields-list",children:(0,c.jsx)(u.kCb,{flexDir:"column",gap:"24px",children:a?(0,c.jsx)(u.M5Y,{children:(0,c.jsx)(u.$jN,{})}):r.length>0&&(0,c.jsx)(u.kCb,{flexDirection:"column",gap:"12px",paddingBottom:"24px",children:r.map(e=>{let t=s.get(e);if(!t)return null;let i="customFieldValues.".concat(t.id);if(!t.allow_list_id&&t.field_type===o.AL.STRING)return(0,c.jsx)(p.gN,{name:i,children:e=>{let{field:i}=e;return(0,c.jsx)(h.j0,{...i,label:t.name,tooltip:t.description,variant:"stacked"})}},e);let n=l.get(t.allow_list_id);if(!n)return null;let{options:a}=n;return(0,c.jsx)(m.d,{name:i,allowClear:!0,mode:t.field_type!==o.AL.STRING?"multiple":void 0,label:t.name,options:a,tooltip:t.description,layout:"stacked",className:"w-full"},e)})})})})}):null};i(94799)},97181:function(e,t,i){"use strict";i.d(t,{d:function(){return d}});var l=i(24246),s=i(77181),n=i(34090),a=i(27378),o=i(91613),r=i(40324);let d=e=>{let{name:t,label:i,labelProps:d,tooltip:c,isRequired:u,layout:p="inline",...x}=e,[m,h,{setValue:f}]=(0,n.U$)(t),v=!!(h.touched&&h.error),[g,j]=(0,a.useState)("");m.value||"tags"!==x.mode&&"multiple"!==x.mode||(m.value=[]),"tags"===x.mode&&"string"==typeof m.value&&(m.value=[m.value]);let C="tags"===x.mode?(e,t)=>e?e.value!==g||m.value.includes(g)?x.optionRender?x.optionRender(e,t):e.label:'Create "'.concat(g,'"'):void 0:x.optionRender||void 0,_=e=>{j(e),x.onSearch&&x.onSearch(e)},b=(e,t)=>{f(e),x.onChange&&x.onChange(e,t)};return"inline"===p?(0,l.jsx)(s.NIc,{isInvalid:v,isRequired:u,children:(0,l.jsxs)(s.rjZ,{templateColumns:i?"1fr 3fr":"1fr",children:[i?(0,l.jsx)(r.__,{htmlFor:x.id||t,...d,children:i}):null,(0,l.jsxs)(s.jqI,{align:"center",children:[(0,l.jsxs)(s.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,l.jsx)(s.WPr,{...m,id:x.id||t,"data-testid":"controlled-select-".concat(m.name),...x,optionRender:C,onSearch:"tags"===x.mode?_:void 0,onChange:b,value:m.value||void 0,status:v?"error":void 0}),(0,l.jsx)(r.Bc,{isInvalid:v,message:h.error,fieldName:m.name})]}),c?(0,l.jsx)(o.Z,{label:c}):null]})]})}):(0,l.jsx)(s.NIc,{isInvalid:v,isRequired:u,children:(0,l.jsxs)(s.gCW,{alignItems:"start",children:[(0,l.jsxs)(s.jqI,{align:"center",children:[i?(0,l.jsx)(r.__,{htmlFor:x.id||t,fontSize:"xs",my:0,mr:1,...d,children:i}):null,c?(0,l.jsx)(o.Z,{label:c}):null]}),(0,l.jsx)(s.WPr,{...m,id:x.id||t,"data-testid":"controlled-select-".concat(m.name),...x,optionRender:C,onSearch:"tags"===x.mode?_:void 0,onChange:b,value:m.value||void 0,status:v?"error":void 0}),(0,l.jsx)(r.Bc,{isInvalid:v,message:h.error,fieldName:m.name})]})})}},10342:function(e,t,i){"use strict";var l=i(24246),s=i(77181),n=i(91613);t.Z=e=>{let{title:t,tooltip:i,children:a,...o}=e;return(0,l.jsxs)(s.xuv,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",...o,children:[(0,l.jsxs)(s.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,i?(0,l.jsx)(s.xvT,{as:"span",mx:1,children:(0,l.jsx)(n.Z,{label:i})}):void 0]}),(0,l.jsx)(s.Kqy,{p:6,spacing:6,children:a})]})}},14047:function(e,t,i){"use strict";i.d(t,{H:function(){return n},V:function(){return l.V}});var l=i(84306),s=i(812);let n=()=>{let{errorAlert:e}=(0,l.V)();return{handleError:t=>{let i="An unexpected error occurred. Please try again.";(0,s.Ot)(t)?i=t.data.detail:(0,s.tB)(t)&&(i=t.data.detail[0].msg),e(i)}}}},84306:function(e,t,i){"use strict";i.d(t,{V:function(){return n}});var l=i(24246),s=i(77181);let n=()=>{let e=(0,s.pmc)();return{errorAlert:(t,i,n)=>{let a={...n,position:(null==n?void 0:n.position)||"top",render:e=>{let{onClose:n}=e;return(0,l.jsxs)(s.bZj,{alignItems:"normal",status:"error","data-testid":"error-alert",children:[(0,l.jsx)(s.zMQ,{}),(0,l.jsxs)(s.xuv,{children:[i&&(0,l.jsx)(s.CdC,{children:i}),(0,l.jsx)(s.XaZ,{children:t})]}),(0,l.jsx)(s.PZ7,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}};(null==n?void 0:n.id)&&e.isActive(n.id)?e.update(n.id,a):e(a)},successAlert:(t,i,n)=>{let a={...n,position:(null==n?void 0:n.position)||"top",render:e=>{let{onClose:n}=e;return(0,l.jsxs)(s.bZj,{alignItems:"normal",status:"success",variant:"subtle","data-testid":"success-alert",children:[(0,l.jsx)(s.zMQ,{}),(0,l.jsxs)(s.xuv,{children:[i&&(0,l.jsx)(s.CdC,{children:i}),(0,l.jsx)(s.XaZ,{children:t})]}),(0,l.jsx)(s.PZ7,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}};(null==n?void 0:n.id)&&e.isActive(n.id)?e.update(n.id,a):e(a)}}}},70788:function(e,t,i){"use strict";i.d(t,{m:function(){return d}});var l=i(24246),s=i(77181),n=i(79894),a=i.n(n),o=i(27378);let{Text:r}=s.AntTypography,d=e=>{let{items:t,...i}=e,n=(0,o.useMemo)(()=>null==t?void 0:t.map((e,i)=>{let n=i===t.length-1,o={...e},d=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,l.jsx)(r,{style:{color:"inherit",maxWidth:n?void 0:400},ellipsis:!n,children:o.title})),d)?o.title=(0,l.jsx)(s.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,l.jsx)(a(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,l.jsx)(s.zrq,{items:n,...i})}},30234:function(e,t,i){"use strict";var l=i(24246),s=i(77181);t.Z=e=>{let{heading:t,HeadingButton:i,children:n}=e;return(0,l.jsx)(s.Kqy,{spacing:4,children:(0,l.jsxs)(s.xuv,{maxWidth:"720px",border:"1px",borderColor:"gray.200",borderRadius:6,overflow:"visible",mt:6,children:[(0,l.jsxs)(s.xuv,{backgroundColor:"gray.50",px:6,py:4,display:"flex",flexDirection:"row",alignItems:"center",borderBottom:"1px",borderColor:"gray.200",borderTopRadius:6,children:[(0,l.jsx)(s.X6q,{as:"h3",size:"xs",children:t}),i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.LZC,{}),(0,l.jsx)(i,{})]}):null]}),(0,l.jsx)(s.Kqy,{spacing:4,px:6,py:6,children:n})]})})}},76513:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return X}});var l=i(24246),s=i(77213),n=i(77181),a=i(27378),o=i(58754),r=i(92222),d=i(59003),c=i(16134),u=i(812),p=i(19904),x=i(14481),m=i(46628),h=i(72625),f=i(62656);let v=new Map([["string","Single Select"],["string[]","Multi Select"],["open-text","Open Text"]]),g=new Map([[f.P6.SYSTEM,"system:information"],[f.P6.DATA_USE,"taxonomy:data use"],[f.P6.DATA_CATEGORY,"taxonomy:data category"],[f.P6.DATA_SUBJECT,"taxonomy:data subject"],[f.P6.PRIVACY_DECLARATION,"system:data use"]]);var j=i(32885);let C=e=>{var t;let i=null!==(t=g.get(e.getValue()))&&void 0!==t?t:e.getValue();return(0,l.jsx)(h.G3,{...e,value:i})},_=e=>{let{row:t,getValue:i}=e,s=t.original.allow_list_id?i():"open-text",n=v.get(s)||s;return(0,l.jsx)(h.A4,{value:n})},b=e=>{let{row:t,getValue:i,isDisabled:s}=e,n=!!i(),[a]=(0,j.yM)(),o=async e=>a({...t.original,active:e});return(0,l.jsx)(h.S1,{enabled:n,onToggle:o,title:"Disable custom field",message:"Are you sure you want to disable this custom field?",isDisabled:s,"aria-label":n?"Disable custom field":"Enable custom field"})};var y=i(56358),T=i(58452);let w=e=>{let{customField:t,onEdit:i,onDelete:s,...a}=e,o=(0,n.qY0)();return(0,l.jsxs)(n.xuv,{...a,children:[(0,l.jsx)(n.wpx,{"aria-label":"Edit property","data-testid":"edit-property-button",size:"small",className:"mr-[10px]",icon:(0,l.jsx)(n.dY8,{}),onClick:e=>{e.stopPropagation(),i(t,e)}}),(0,l.jsx)(n.wpx,{"aria-label":"Delete property","data-testid":"delete-property-button",size:"small",className:"mr-[10px]",icon:(0,l.jsx)(y.q,{}),onClick:e=>{e.stopPropagation(),o.onOpen()}}),(0,l.jsx)(T.Z,{isOpen:o.isOpen,onClose:o.onClose,onConfirm:()=>{s(t),o.onClose()},title:"Delete custom field",message:(0,l.jsx)(n.xvT,{color:"gray.500",children:"Are you sure you want to delete this custom field? This will remove the custom field and all stored values and this action can't be undone."}),continueButtonText:"Confirm",isCentered:!0,icon:(0,l.jsx)(n.aNP,{})})]})};var S=i(95346),E=i(14047),I=i(34090),L=i(55484);let R={color:"gray.600",fontSize:"14px",fontWeight:"semibold",minWidth:"150px"};var A=e=>{let{customLabelProps:t,disabled:i=!1,displayHelpIcon:s=!0,helpIconVisibility:a=!1,isRequired:o=!1,label:r,type:d="text",placeholder:c,...u}=e,[p,x]=(0,I.U$)(u),{id:m,name:h,autoFocus:f}=u,v="custom-input-".concat(p.name);return(0,l.jsxs)(n.NIc,{display:"flex",isRequired:o,isInvalid:!!(x.error&&x.touched),children:[r&&(0,l.jsx)(n.lXp,{htmlFor:m||h,...t||R,children:r}),(0,l.jsxs)(n.gCW,{align:"flex-start",w:"inherit",children:["number"===d&&(0,l.jsxs)(n.Y2U,{allowMouseWheel:!0,color:"gray.700",defaultValue:0,min:0,size:"sm",children:[(0,l.jsx)(n.zuI,{...p,autoComplete:"off",autoFocus:f,"data-testid":v}),(0,l.jsxs)(n.FiK,{children:[(0,l.jsx)(n.WQu,{}),(0,l.jsx)(n.Y_d,{})]})]}),"text"===d&&(0,l.jsx)(n.IIB,{...p,autoComplete:"off",autoFocus:f,color:"gray.700",isDisabled:i,placeholder:c,size:"sm","data-testid":v}),"textarea"===d&&(0,l.jsx)(n.gxH,{...p,autoComplete:"off",autoFocus:f,color:"gray.700",placeholder:c,resize:"none",size:"sm",value:p.value||"","data-testid":v}),(0,l.jsx)(n.J1D,{children:x.error})]}),s&&(0,l.jsx)(n.kCb,{alignContent:"center",h:"32px",visibility:a?"visible":"hidden",children:(0,l.jsx)(n.ITP,{marginLeft:"8px",_hover:{cursor:"pointer"}})})]})},M=i(70416),k=i(10342),N=i(95492),P=i(97181);let H={...R,minWidth:"unset"},O=e=>{let{values:t,validationSchema:i,errors:s,dirty:o,isValid:r,isSubmitting:d,isLoading:c,onClose:u,handleDropdownChange:p,isEditing:x}=e,{validateForm:m}=(0,I.u6)();return(0,a.useEffect)(()=>{m()},[i,m]),(0,l.jsxs)(I.l0,{style:{paddingTop:"12px",paddingBottom:"12px"},children:[(0,l.jsx)(n.xuv,{py:3,children:(0,l.jsxs)(k.Z,{title:"Field Information",children:[(0,l.jsx)(A,{displayHelpIcon:!0,isRequired:!0,label:"Name",name:"name",customLabelProps:H}),(0,l.jsx)(A,{displayHelpIcon:!0,label:"Description",name:"description",customLabelProps:H}),(0,l.jsx)(P.d,{label:"Location",name:"resource_type",options:S.C7,labelProps:H,disabled:x})]})}),(0,l.jsx)(n.xuv,{py:3,children:(0,l.jsxs)(k.Z,{title:"Configuration",children:[(0,l.jsx)(P.d,{label:"Field Type",name:"field_type",labelProps:H,options:S.Hn,onChange:p}),t.field_type!==S.Uv.OPEN_TEXT?(0,l.jsx)(n.kCb,{flexDirection:"column",gap:"12px",paddingTop:"6px",paddingBottom:"24px",children:(0,l.jsx)(I.F2,{name:"allow_list.allowed_values",render:e=>{let{allowed_values:i}=t.allow_list;return(0,l.jsxs)(n.kCb,{flexDirection:"column",gap:"6",pl:"6",children:[(0,l.jsx)(n.kCb,{flexDirection:"column",children:i.map((t,s)=>(0,l.jsxs)(n.kCb,{flexGrow:1,gap:"3",mt:s>0?3:void 0,children:[(0,l.jsx)(A,{customLabelProps:{color:"gray.600",fontSize:"sm",fontWeight:"500",lineHeight:"20px",minW:"126px",pr:"8px"},displayHelpIcon:!1,isRequired:!0,label:"List item ".concat(s+1),name:"allow_list.allowed_values[".concat(s,"]")}),(0,l.jsx)(n.wpx,{"aria-label":"Remove this list value","data-testid":"remove-list-value-btn-".concat(s),icon:(0,l.jsx)(N.l,{}),disabled:i.length<=1,onClick:()=>e.remove(s),type:"text"})]},s))}),(0,l.jsxs)(n.kCb,{alignItems:"center",children:[(0,l.jsx)(n.xvT,{color:"gray.600",fontSize:"xs",fontWeight:"500",lineHeight:"16px",pr:"8px",children:"Add a list value"}),(0,l.jsx)(n.wpx,{"aria-label":"Add a list value","data-testid":"add-list-value-btn",icon:(0,l.jsx)(M.d,{h:"7px",w:"7px"}),onClick:()=>{e.push("")},size:"small"}),0===i.length&&(null==s?void 0:s.allow_list)?(0,l.jsx)(n.xvT,{color:"red.500",pl:"18px",size:"sm",children:s.allow_list.allowed_values}):null]})]})}})}):null]})}),(0,l.jsxs)(n.kCb,{justifyContent:"space-between",width:"100%",children:[(0,l.jsx)(n.wpx,{onClick:u,disabled:c||d,className:"mr-3","data-testid":"cancel-btn",children:"Cancel"}),(0,l.jsx)(n.wpx,{htmlType:"submit",type:"primary","data-testid":"save-btn",loading:c,disabled:!o||!r||d,children:"Save"})]})]})},V={description:"",field_type:S.Uv.OPEN_TEXT,name:"",resource_type:f.P6.SYSTEM,allow_list:{name:"",description:"",allowed_values:[]}},D=L.IX(L.Z_().optional().label("allowed_values")),U=L.IX(L.Z_().required("List item is required")).min(1,"Must add at least one list value").label("allowed_values"),Z=L.Ry().shape({name:L.Z_().required("Name is required").trim(),allow_list:L.Ry().shape({allowed_values:D})}),z=L.Ry().shape({name:L.Z_().required("Name is required").trim(),allow_list:L.Ry().shape({allowed_values:U})}),F=(e,t)=>{var i,l,s;let n;if(!e)return;e.field_type!==f.AL.STRING||e.allow_list_id||(n=S.Uv.OPEN_TEXT),e.field_type===f.AL.STRING&&e.allow_list_id&&(n=S.Uv.SINGLE_SELECT),e.field_type===f.AL.STRING_&&e.allow_list_id&&(n=S.Uv.MULTIPLE_SELECT);let a=t?{name:null!==(i=t.name)&&void 0!==i?i:"",description:null!==(l=t.description)&&void 0!==l?l:"",allowed_values:null!==(s=t.allowed_values)&&void 0!==s?s:[]}:V.allow_list;return{...e,field_type:n||S.Uv.OPEN_TEXT,allow_list:a}},q=e=>{let{isOpen:t,onClose:i,isLoading:s,customField:o}=e,{errorAlert:r,successAlert:d}=(0,E.V)(),[c]=(0,j.Ld)(),[p]=(0,j.yM)(),[x]=(0,j.Nt)(),{data:m,isLoading:h}=(0,j.vA)(null==o?void 0:o.allow_list_id,{skip:!(null==o?void 0:o.allow_list_id)}),[v,g]=(0,a.useState)(Z);if(h||!t)return null;let C=F(o,m),_=!!C,b=e=>{e===S.Uv.OPEN_TEXT?g(Z):g(z)},y=async e=>{if([S.Uv.SINGLE_SELECT,S.Uv.MULTIPLE_SELECT].includes(e.field_type)){var t,l;if(new Set(null===(t=e.allow_list)||void 0===t?void 0:t.allowed_values.map(e=>e.toLowerCase().trim()).map(e=>e)).size<e.allow_list.allowed_values.length){r("List item value must be unique");return}let{allow_list:i}=e;e.allow_list_id&&(i.id=e.allow_list_id),i.name||(i.name=Date.now().toString()+Math.random().toString());let s=await x(i);(0,u.D4)(s)||e.allow_list_id||(e.allow_list_id=null===(l=s.data)||void 0===l?void 0:l.id)}e.field_type===S.Uv.OPEN_TEXT&&(e.allow_list_id=void 0),[S.Uv.SINGLE_SELECT,S.Uv.OPEN_TEXT].includes(e.field_type)&&(e.field_type=f.AL.STRING),e.field_type===S.Uv.MULTIPLE_SELECT&&(e.field_type=f.AL.STRING_);let s={...e};delete s.allow_list;let n=o?await p(s):await c(s);(0,u.D4)(n)?r((0,u.e$)(n.error),"Custom field has failed to save due to the following:"):(i(),d("Custom field successfully saved"))};return(0,l.jsxs)(n.u_l,{id:"custom-field-modal-hello-world",isOpen:t,onClose:i,size:"lg",returnFocusOnClose:!1,isCentered:!0,children:[(0,l.jsx)(n.ZAr,{}),(0,l.jsxs)(n.hzk,{id:"modal-content","data-testid":"custom-field-modal",maxHeight:"80%",overflowY:"auto",children:[(0,l.jsx)(n.xBx,{id:"modal-header",fontWeight:"semibold",lineHeight:5,fontSize:"sm",py:"18px",px:6,height:"56px",backgroundColor:"gray.50",borderColor:"gray.200",borderWidth:"0px 0px 1px 1p",borderTopRightRadius:"8px",borderTopLeftRadius:"8px",boxSizing:"border-box",children:o?"Manage Custom Field":"Add a custom field"}),(0,l.jsx)(n.fef,{px:6,py:0,children:(0,l.jsx)(I.J9,{initialValues:C||V,validationSchema:v,onSubmit:y,enableReinitialize:!0,validateOnChange:!0,children:e=>(0,l.jsx)(O,{isEditing:_,validationSchema:v,isLoading:s,onClose:i,handleDropdownChange:b,...e})})})]})]})},W="Add a custom field",G=()=>(0,l.jsx)(n.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,l.jsxs)(n.gCW,{children:[(0,l.jsx)(n.xvT,{fontSize:"md",fontWeight:"600",children:"It looks like it’s your first time here!"}),(0,l.jsxs)(n.xvT,{fontSize:"sm",children:["You haven’t created any custom fields yet.",(0,l.jsx)("br",{}),"To create a custom field, click on the"," ",(0,l.jsxs)("strong",{children:['"',W,'"']})," button"]})]})}),B=(0,r.Cl)(),Y=e=>{let{...t}=e,i=(0,n.pmc)(),{isLoading:s}=(0,j.GH)(),o=(0,c.C)(j.fN),[h]=(0,j.UF)(),{isOpen:v,onClose:g,onOpen:y}=(0,n.qY0)(),[T,S]=(0,a.useState)(),[E,I]=(0,a.useState)(),L=(0,p.Tg)([f.Sh.CUSTOM_FIELD_UPDATE]),R=(0,p.Tg)([f.Sh.CUSTOM_FIELD_DELETE]),A=e=>{L&&(S(e),y())},M=async e=>{if(R&&e.id){let t=await h({id:e.id});if((0,u.D4)(t)){i((0,m.Vo)((0,u.e$)(t.error)));return}i((0,m.t5)("Custom field deleted"))}},k=(0,a.useMemo)(()=>[B.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(x.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(x.Rr,{value:"Label",...e})}),B.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(x.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(x.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),B.accessor(e=>e.field_type,{id:"field_type",cell:_,header:e=>(0,l.jsx)(x.Rr,{value:"Field Type",...e})}),B.accessor(e=>e.resource_type,{id:"resource_type",cell:C,header:e=>(0,l.jsx)(x.Rr,{value:"Locations",...e})}),L&&B.accessor(e=>e.active,{id:"enable",cell:b,header:e=>(0,l.jsx)(x.Rr,{value:"Enable",...e}),meta:{disableRowClick:!0}}),(L||R)&&B.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e;return(0,l.jsx)(w,{customField:t.original,onEdit:A,onDelete:M})},meta:{disableRowClick:!0}})].filter(Boolean),[R,L]),N=(0,d.b7)({getCoreRowModel:(0,r.sC)(),getFilteredRowModel:(0,r.vL)(),getSortedRowModel:(0,r.tj)(),onGlobalFilterChange:I,globalFilterFn:"includesString",columns:k,data:o,state:{globalFilter:E},columnResizeMode:"onChange"});return(0,l.jsxs)(n.xuv,{...t,children:[(0,l.jsx)(n.xuv,{maxWidth:600,children:(0,l.jsx)(n.xvT,{mb:10,fontSize:"sm",children:o.length>0?"Custom fields enable you to capture metrics specific to your organization and have those metrics appear in the data map and in reports.":"Custom fields provide organizations with the capability to capture metrics that are unique to their specific needs, allowing them to create customized reports. These fields can be added to either systems or elements within a taxonomy, and once added, they become reportable fields that are visible on the data map."})}),(0,l.jsxs)(n.xuv,{"data-testid":"custom-fields-page",children:[(0,l.jsxs)(x.Q$,{children:[(0,l.jsx)(x.HO,{globalFilter:E,setGlobalFilter:I,placeholder:"Search for a custom field"}),(0,l.jsx)(n.Ugi,{alignItems:"center",spacing:4,children:(0,l.jsx)(()=>(0,l.jsx)(p.ZP,{scopes:[f.Sh.CUSTOM_FIELD_DEFINITION_CREATE],children:(0,l.jsx)(n.wpx,{type:"primary","data-testid":"add-custom-field-btn",onClick:y,children:W})}),{})})]}),s?(0,l.jsx)(n.xuv,{p:2,borderWidth:1,children:(0,l.jsx)(x.I4,{rowHeight:26,numRows:10})}):(0,l.jsx)(x.ZK,{tableInstance:N,onRowClick:L?A:void 0,emptyTableNotice:(0,l.jsx)(G,{}),enableSorting:!0}),v&&(0,l.jsx)(q,{customField:T,isOpen:v,onClose:()=>{S(void 0),g()},isLoading:!1})]})]})};var X=()=>(0,l.jsx)(s.Z,{title:"Custom fields",children:(0,l.jsxs)(n.xuv,{"data-testid":"custom-fields-management",children:[(0,l.jsx)(o.Z,{heading:"Custom fields"}),(0,l.jsx)(Y,{})]})})}},function(e){e.O(0,[8033,6060,4481,2888,9774,179],function(){return e(e.s=70378)}),_N_E=e.O()}]);