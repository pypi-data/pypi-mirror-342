"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[401],{97181:function(e,a,n){n.d(a,{d:function(){return d}});var l=n(24246),t=n(77181),i=n(34090),s=n(27378),r=n(91613),o=n(40324);let d=e=>{let{name:a,label:n,labelProps:d,tooltip:c,isRequired:u,layout:v="inline",...h}=e,[m,x,{setValue:g}]=(0,i.U$)(a),j=!!(x.touched&&x.error),[p,f]=(0,s.useState)("");m.value||"tags"!==h.mode&&"multiple"!==h.mode||(m.value=[]),"tags"===h.mode&&"string"==typeof m.value&&(m.value=[m.value]);let b="tags"===h.mode?(e,a)=>e?e.value!==p||m.value.includes(p)?h.optionRender?h.optionRender(e,a):e.label:'Create "'.concat(p,'"'):void 0:h.optionRender||void 0,C=e=>{f(e),h.onSearch&&h.onSearch(e)},y=(e,a)=>{g(e),h.onChange&&h.onChange(e,a)};return"inline"===v?(0,l.jsx)(t.NIc,{isInvalid:j,isRequired:u,children:(0,l.jsxs)(t.rjZ,{templateColumns:n?"1fr 3fr":"1fr",children:[n?(0,l.jsx)(o.__,{htmlFor:h.id||a,...d,children:n}):null,(0,l.jsxs)(t.jqI,{align:"center",children:[(0,l.jsxs)(t.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,l.jsx)(t.WPr,{...m,id:h.id||a,"data-testid":"controlled-select-".concat(m.name),...h,optionRender:b,onSearch:"tags"===h.mode?C:void 0,onChange:y,value:m.value||void 0,status:j?"error":void 0}),(0,l.jsx)(o.Bc,{isInvalid:j,message:x.error,fieldName:m.name})]}),c?(0,l.jsx)(r.Z,{label:c}):null]})]})}):(0,l.jsx)(t.NIc,{isInvalid:j,isRequired:u,children:(0,l.jsxs)(t.gCW,{alignItems:"start",children:[(0,l.jsxs)(t.jqI,{align:"center",children:[n?(0,l.jsx)(o.__,{htmlFor:h.id||a,fontSize:"xs",my:0,mr:1,...d,children:n}):null,c?(0,l.jsx)(r.Z,{label:c}):null]}),(0,l.jsx)(t.WPr,{...m,id:h.id||a,"data-testid":"controlled-select-".concat(m.name),...h,optionRender:b,onSearch:"tags"===h.mode?C:void 0,onChange:y,value:m.value||void 0,status:j?"error":void 0}),(0,l.jsx)(o.Bc,{isInvalid:j,message:x.error,fieldName:m.name})]})})}},8133:function(e,a,n){var l=n(24246),t=n(77181);a.Z=e=>{let{title:a,children:n,isOpen:i,onClose:s,...r}=e;return(0,l.jsxs)(t.u_l,{isOpen:i,onClose:s,isCentered:!0,scrollBehavior:"inside",size:"xl",id:"add-modal",...r,children:[(0,l.jsx)(t.ZAr,{}),(0,l.jsxs)(t.hzk,{textAlign:"left",p:0,"data-testid":"add-modal-content",children:[(0,l.jsx)(t.xBx,{p:0,children:(0,l.jsx)(t.xuv,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,l.jsx)(t.X6q,{as:"h3",size:"sm",children:a})})}),(0,l.jsx)(t.fef,{pb:4,overflow:"auto",children:n})]})]})}},33335:function(e,a,n){n.d(a,{E:function(){return l}});let l=e=>e.toLowerCase().replace(/[ .]/g,"_").replace(/[^a-zA-Z0-9_<>-]/g,"")},36345:function(e,a,n){n.d(a,{Z:function(){return g}});var l=n(24246),t=n(77181),i=n(34090),s=n(27378),r=n(16134),o=n(40324);let d=(0,t.IUT)({displayName:"CompassIcon",viewBox:"0 0 512 512",path:(0,l.jsx)("path",{fill:"currentColor",d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm306.7 69.1L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})});var c=n(91613),u=n(57865);let{Text:v}=t.AntTypography,h=e=>{let{searchText:a,suggestion:n,...t}=e;return a&&n?(0,l.jsxs)(v,{"aria-hidden":!0,style:{pointerEvents:"none",position:"absolute",zIndex:10,top:"var(--ant-line-width)",bottom:"var(--ant-line-width)",left:"var(--ant-padding-sm)",lineHeight:"calc(var(--ant-control-height) - var(--ant-line-width))"},...t,children:[(0,l.jsx)(v,{className:"text-transparent",children:a}),(0,l.jsx)(v,{type:"secondary",children:n.substring(a.length)})]}):null},m="Create new system",x=e=>{let{active:a,disabled:n,onRefreshSuggestions:i}=e,s={bg:a?"complimentary.500":"gray.100"};return(0,l.jsxs)(t.gCW,{children:[(0,l.jsx)(t.LZC,{minHeight:"18px"}),(0,l.jsxs)(t.v2r,{children:[(0,l.jsx)(t.j2t,{as:t.hU,size:"sm",isDisabled:n,icon:(0,l.jsx)(d,{color:a?"white":"gray.700",boxSize:4}),"aria-label":"Update information from Compass","data-testid":"refresh-suggestions-btn",_hover:{_disabled:s},...s}),(0,l.jsx)(t.qyq,{children:(0,l.jsx)(t.sNh,{onClick:i,children:(0,l.jsx)(t.xvT,{fontSize:"xs",lineHeight:4,children:"Reset to Compass defaults"})})})]})]})};var g=e=>{var a,n;let{label:d,isCreate:v,lockedForGVL:g,options:j,isLoading:p,onVendorSelected:f}=e,b=(0,r.C)(u.bN),[C,y,{setValue:_}]=(0,i.U$)("name"),w=!!(y.touched&&y.error),I={...C,value:null!==(a=C.value)&&void 0!==a?a:""},{touched:N,values:z,setTouched:S,setFieldValue:R,validateForm:k}=(0,i.u6)(),[q,E]=(0,s.useState)(!0),Z=null!==(n=j.find(e=>e.value===I.value))&&void 0!==n?n:{label:I.value,value:I.value,description:""},W=(e,a)=>!!(null==a?void 0:a.label.toLowerCase().startsWith(e.toLowerCase())),[B,U]=(0,s.useState)(""),A=(0,s.useMemo)(()=>j.filter(e=>W(B,e)),[j,B]),F=(0,s.useMemo)(()=>{let e=j;return v&&B&&(e=[...j,{label:"".concat(m,' "').concat(B,'"...'),value:B}]),e},[v,j,B]),L=!!B&&A.length>0,T=g&&!v;(0,s.useEffect)(()=>{E(!I.value&&!z.vendor_id)},[I.value,z.vendor_id,E]),(0,s.useEffect)(()=>{k()},[q,k]);let M=async()=>{U(""),R("vendor_id",void 0),await _(""),S({...N,vendor_id:!1,name:!1}),f(void 0)},P=async e=>{if(e){let a=j.some(a=>a.value===e.value)?e.value:void 0;R("vendor_id",a),await _(e.label.startsWith(m)?e.value:e.label),S({...N,vendor_id:!0,name:!0}),f(a)}},D=async e=>{I.onBlur(e),B&&await _(B),S({...N,name:!0})},H=async e=>{A.length>0&&B!==A[0].label?(e.preventDefault(),U(A[0].label),R("vendor_id",A[0].value),await _(A[0].label),f(A[0].value)):(R("vendor_id",void 0),await _(B)),S({...N,name:!0})},O=(0,l.jsx)(t.NIc,{isInvalid:w,isRequired:!0,width:"100%",children:(0,l.jsxs)(t.gCW,{alignItems:"start",position:"relative",width:"100%",children:[(0,l.jsxs)(t.Ugi,{spacing:1,children:[(0,l.jsx)(o.__,{htmlFor:"vendorName",fontSize:"xs",my:0,mr:1,children:d}),(0,l.jsx)(c.Z,{label:"Enter the system name"})]}),(0,l.jsxs)(t.xuv,{width:"100%",className:"relative",children:[(0,l.jsx)(t.WPr,{id:"vendorName",labelInValue:!0,autoFocus:!0,allowClear:!0,options:F,loading:p,filterOption:(e,a)=>W(e,a)||!!(null==a?void 0:a.label.startsWith(m)),optionFilterProp:"label",value:Z,placeholder:"Enter system name...",disabled:T,onChange:P,onSearch:U,onClear:M,onBlur:D,onInputKeyDown:e=>{B&&"Tab"===e.key&&H(e)},status:w?"error":void 0,"data-testid":"vendor-name-select"}),(0,l.jsx)(h,{searchText:B,suggestion:A.length?A[0].label:""})]}),(0,l.jsx)(o.Bc,{isInvalid:w,message:y.error,fieldName:"name"})]})});return(0,l.jsxs)(t.Ugi,{alignItems:"flex-start",width:"full",children:[q?O:(0,l.jsx)(o.j0,{autoFocus:!0,id:"name",name:"name",label:"System name",tooltip:"Enter the system name",variant:"stacked",disabled:T,isRequired:!0,inputRightElement:T?null:(0,l.jsx)(t.PZ7,{onClick:M,size:"sm","data-testid":"clear-btn"})}),(0,l.jsx)(x,{active:!!z.vendor_id||L,disabled:!z.vendor_id||"showing"===b,onRefreshSuggestions:()=>f(z.vendor_id)})]})}}}]);