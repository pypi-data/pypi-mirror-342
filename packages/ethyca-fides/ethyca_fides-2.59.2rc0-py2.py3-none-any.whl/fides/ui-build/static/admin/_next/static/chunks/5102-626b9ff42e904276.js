(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5102],{29850:function(e,s,t){"use strict";t.d(s,{R:function(){return c}});var i=t(24246),n=t(77181),a=t(27378),l=t(65450);let r=e=>{let{children:s,className:t,style:a,...l}=e;return(0,i.jsx)(n.wpx,{...l,type:"text",className:"w-full justify-start ".concat(t),style:{fontWeight:600,padding:"var(--ant-select-option-padding)",backgroundColor:"var(--ant-select-option-selected-bg)",...a},children:s})};var o=t(16394);let d=(e,s)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r,{onClick:s,"data-testid":"add-new-system",id:"add-new-system",children:"Add new system +"}),e]}),c=e=>{var s;let{onAddSystem:t,...r}=e,[c,m]=(0,a.useState)(),{data:u,isFetching:h}=(0,l.xF)({page:1,size:25,search:c||void 0}),p=null==u?void 0:null===(s=u.items)||void 0===s?void 0:s.map(e=>({value:e.fides_key,label:e.name})),y=(0,a.useCallback)(e=>{(null==e?void 0:e.length)>1&&m(e),(null==e?void 0:e.length)===0&&m(void 0)},[m]),x=(0,a.useMemo)(()=>(0,o.Ds)(y,300),[y]);return(0,i.jsx)(n.WPr,{placeholder:"Search...","aria-label":"Search for a system to select",dropdownStyle:{minWidth:"500px"},dropdownRender:t?e=>d(e,t):void 0,"data-testid":"system-select",...r,filterOption:!1,options:p,onSearch:x,loading:r.loading||h})}},79283:function(e,s,t){"use strict";t.d(s,{l:function(){return o}});var i=t(24246),n=t(77181),a=t(72707),l=t.n(a);let r=e=>{let{data:s}=e;return(0,i.jsxs)(n.jqI,{gap:12,title:"".concat(s.primaryName||"").concat(s.primaryName?": ":"").concat(s.name," - ").concat(s.description),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:s.primaryName||s.name}),s.primaryName&&": ".concat(s.name)]}),(0,i.jsx)("em",{children:s.description})]})},o=e=>{let{options:s,...t}=e,a=null==s?void 0:s.map(e=>({...e,className:l().option}));return(0,i.jsx)(n.WPr,{options:a,autoFocus:!0,variant:"borderless",optionRender:r,dropdownStyle:{minWidth:"500px"},className:"w-full p-0","data-testid":"taxonomy-select",...t})}},70682:function(e,s,t){"use strict";var i=t(24246),n=t(79283),a=t(34929),l=t(78238);s.Z=e=>{let{selectedTaxonomies:s,...t}=e,{getDataUseDisplayNameProps:r,getDataUses:o}=(0,a.Z)(),d=o().filter(e=>e.active&&l.g.includes(e.fides_key)).map(e=>{let{name:s,primaryName:t}=r(e.fides_key);return{value:e.fides_key,name:s,primaryName:t,description:e.description||""}});return(0,i.jsx)(n.l,{options:d,...t})}},26183:function(e,s,t){"use strict";var i=t(24246);t(27378),s.Z=e=>{let{children:s,className:t,...n}=e;return(0,i.jsx)("div",{className:"relative flex w-full flex-wrap items-center gap-2 overflow-x-auto py-2 ".concat(t||""),...n,children:s})}},77685:function(e,s,t){"use strict";t.d(s,{i:function(){return S}});var i=t(24246),n=t(77181),a=t(34090),l=t(27378),r=t(55484),o=t(16134),d=t(25980),c=t(97181),m=t(40324),u=t(812),h=t(14047),p=t(45938),y=t(8133),x=t(33335),f=t(32885),v=t(57865),g=t(93237),j=t(65450),b=t(36345);let{Text:w}=n.AntTypography,_={name:"",vendor_id:void 0,description:"",tags:[]},S=e=>{let{onSuccessfulSubmit:s,toastOnSuccess:t,...S}=e,[k,C]=(0,l.useState)(!1),N=(0,o.T)(),{tcf:I,dictionaryService:R}=(0,d.hz)(),{isLoading:q}=(0,f.Rd)(void 0,{skip:!R}),z=(0,o.C)(f.o),F=(0,o.C)(v.gU),[W]=(0,j.in)(),[Z]=(0,f.Qk)(),[B]=(0,j.f7)(),{successAlert:D,errorAlert:E}=(0,h.V)(),{setSuggestions:T,setLockedForGVL:U}=v.dictSuggestionsSlice.actions,A=(0,l.useRef)(null),V=(0,l.useMemo)(()=>r.Ry().shape({name:r.Z_().required().label("System name").test("is-unique","",async(e,s)=>{let{data:t}=await W({page:1,size:10,search:e});return!((null==t?void 0:t.items)||[]).filter(s=>s.name===e).some(s=>s.name===e)||s.createError({message:'You already have a system called "'.concat(e,'". Please specify a unique name for this system.')})})}),[W]),Y=e=>{if(R){if(!e){N(T("hiding")),N(U(!1));return}N(T("showing")),I&&(0,u.cj)(e)===u.c6.GVL?N(U(!0)):N(U(!1))}},G=()=>{S.onClose(),N(T("initial")),N(U(!1))},P=async e=>{if(C(!0),e.vendor_id){let i=await Z([e.vendor_id]);if((0,u.D4)(i))E((0,u.e$)(i.error));else{let{data:e}=i,n=e.systems[0];null==s||s(n.fides_key,n.name),t&&D("".concat(e.name," has been added to your system inventory."))}}else{let i={...e,fides_key:(0,x.E)(e.name),system_type:"",body:"",privacy_declarations:[]},n=await B(i);if((0,u.D4)(n))E((0,u.e$)(n.error));else{let{fides_key:i,name:a}=n.data;null==s||s(i,a),t&&D("".concat(e.name," has been added to your system inventory."))}G()}C(!1)};return(0,i.jsx)(y.Z,{title:"Add New System",...S,onClose:G,children:(0,i.jsx)(a.J9,{initialValues:_,onSubmit:P,validationSchema:V,innerRef:A,children:e=>{let{dirty:s,isValid:t}=e;return(0,i.jsxs)(a.l0,{children:[(0,i.jsx)(p.Gt,{id:"new-system-modal",name:"Add New System"}),(0,i.jsxs)(n.jqI,{vertical:!0,gap:20,className:"pb-6 pt-4",children:[(0,i.jsx)(w,{children:"Fides will add this system to your inventory and configure it for consent using the categories of consent listed below. Optionally, you can check if this system is listed within the Fides compass library by selecting the compass icon below."}),R?(0,i.jsx)(b.Z,{label:"System name",options:z,onVendorSelected:Y,isCreate:!0,lockedForGVL:F,isLoading:q}):(0,i.jsx)(m.j0,{id:"name",name:"name",label:"System name",tooltip:"Give the system a unique, and relevant name for reporting purposes. e.g. “Email Data Warehouse”",variant:"stacked",isRequired:!0}),(0,i.jsx)(g.Sv,{id:"description",name:"description",label:"Description",tooltip:"What services does this system perform?",disabled:F}),(0,i.jsx)(c.d,{mode:"tags",id:"tags",name:"tags",label:"System Tags",options:[],layout:"stacked",tooltip:"Are there any tags to associate with this system?",disabled:F})]}),(0,i.jsxs)(n.jqI,{justify:"space-between",children:[(0,i.jsx)(n.wpx,{htmlType:"reset",onClick:G,disabled:q||!s||!t,"data-testid":"cancel-btn",children:"Cancel"}),(0,i.jsx)(n.wpx,{htmlType:"submit",type:"primary",disabled:q||!s||!t,loading:k,"data-testid":"save-btn",children:"Save"})]})]})}})})}},93237:function(e,s,t){"use strict";t.d(s,{Sv:function(){return p},Yb:function(){return h},dQ:function(){return y},lm:function(){return x}});var i=t(24246),n=t(77181),a=t(34090),l=t(27378),r=t(16134),o=t(40324),d=t(91613),c=t(32885),m=t(57865);let u=(e,s,t)=>{var i,n;let[o,d,{setValue:u,setTouched:h}]=(0,a.U$)({name:e,type:t||void 0}),p=!!(d.touched&&d.error),{error:y}=d,x={...o,value:null!==(i=o.value)&&void 0!==i?i:""},[f,v]=(0,l.useState)(null!==(n=x.value)&&void 0!==n?n:""),{values:g}=(0,a.u6)(),{vendor_id:j}=g,b=(0,r.C)((0,c.$e)(j||"")),w=(0,r.C)(m.bN),_=(0,l.useRef)();return(0,l.useEffect)(()=>{"showing"===w&&v(x.value)},[w,v]),(0,l.useEffect)(()=>{if("showing"===w&&b){let t=s?s(b):b[e];x.value!==t&&(u(t),setTimeout(()=>{var e;h(!0),null===(e=_.current)||void 0===e||e.blur()},300))}},[w,u,b,_.current]),(0,l.useEffect)(()=>{"hiding"===w&&u(f)},[w,u,f]),{field:x,isInvalid:p,isShowingSuggestions:w,error:y,inputRef:_}},h=e=>{let{label:s,tooltip:t,disabled:a,isRequired:l=!1,dictField:r,name:c,placeholder:m,id:h}=e,{field:p,isInvalid:y,isShowingSuggestions:x,error:f,inputRef:v}=u(c,r);return(0,i.jsx)(n.NIc,{isInvalid:y,isRequired:l,children:(0,i.jsxs)(n.gCW,{alignItems:"start",children:[(0,i.jsxs)(n.kCb,{alignItems:"center",children:[(0,i.jsx)(o.__,{htmlFor:h||c,fontSize:"xs",my:0,mr:1,children:s}),t?(0,i.jsx)(d.Z,{label:t}):null]}),(0,i.jsx)(o.oi,{...p,ref:v,isRequired:l,isDisabled:a,"data-testid":"input-".concat(p.name),placeholder:m,isPassword:!1,color:"showing"===x?"complimentary.500":"gray.800"}),(0,i.jsx)(o.Bc,{isInvalid:y,message:f,fieldName:p.name})]})})},p=e=>{let{label:s,tooltip:t,disabled:a,isRequired:l=!1,dictField:r,name:c,id:m}=e,{field:h,isInvalid:p,isShowingSuggestions:y,error:x}=u(c,r);return(0,i.jsx)(n.NIc,{isInvalid:p,isRequired:l,children:(0,i.jsxs)(n.gCW,{alignItems:"start",children:[(0,i.jsxs)(n.kCb,{alignItems:"center",children:[(0,i.jsx)(o.__,{htmlFor:m||c,fontSize:"xs",my:0,mr:1,children:s}),t?(0,i.jsx)(d.Z,{label:t}):null]}),(0,i.jsx)(n.gxH,{...h,size:"sm","data-testid":"input-".concat(h.name),focusBorderColor:"primary.600",color:"showing"===y?"complimentary.500":"gray.800",isDisabled:a}),(0,i.jsx)(o.Bc,{isInvalid:p,message:x,fieldName:h.name})]})})},y=e=>{let{label:s,tooltip:t,dictField:l,name:r,id:c,disabled:m}=e,{field:h,isInvalid:p,error:y}=u(r,l,"checkbox");return(0,i.jsxs)(n.NIc,{isInvalid:p,width:"full",children:[(0,i.jsxs)(n.xuv,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsxs)(n.Ugi,{spacing:1,children:[(0,i.jsx)(o.__,{htmlFor:c||r,fontSize:"xs",my:0,mr:0,children:s}),t?(0,i.jsx)(d.Z,{label:t}):null]}),(0,i.jsx)(n.Ugi,{children:(0,i.jsx)(a.gN,{name:h.name,children:e=>{let{form:{setFieldValue:s}}=e;return(0,i.jsx)(n.rAg,{checked:h.checked,onChange:e=>{s(h.name,e)},disabled:m,className:"mr-2","data-testid":"input-".concat(h.name),size:"small"})}})})]}),(0,i.jsx)(o.Bc,{isInvalid:p,message:y,fieldName:h.name})]})},x=e=>{let{label:s,tooltip:t,dictField:l,name:r,id:c,disabled:m}=e,{field:h,isInvalid:p,error:y,isShowingSuggestions:x}=u(r,l,"numeric"),{setFieldValue:f}=(0,a.u6)();return(0,i.jsxs)(n.NIc,{isInvalid:p,width:"full",children:[(0,i.jsxs)(n.xuv,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsxs)(n.Ugi,{spacing:1,children:[(0,i.jsx)(o.__,{htmlFor:c||r,fontSize:"xs",my:0,mr:0,children:s}),t?(0,i.jsx)(d.Z,{label:t}):null]}),(0,i.jsx)(n.Ugi,{children:(0,i.jsxs)(n.Y2U,{value:h.value,name:h.name,size:"xs",onBlur:h.onBlur,onChange:e=>{f(h.name,e)},w:"100%",colorScheme:"terracotta",inputMode:"numeric","data-testid":"input-".concat(h.name),color:"showing"===x?"complimentary.500":"gray.800",focusBorderColor:"primary.600",isDisabled:m,children:[(0,i.jsx)(n.zuI,{}),(0,i.jsxs)(n.FiK,{children:[(0,i.jsx)(n.WQu,{}),(0,i.jsx)(n.Y_d,{})]})]})})]}),(0,i.jsx)(o.Bc,{isInvalid:p,message:y,fieldName:h.name})]})}},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}}]);