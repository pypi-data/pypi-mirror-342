"use strict";(self.webpackChunkmlflow_oidc_auth_front=self.webpackChunkmlflow_oidc_auth_front||[]).push([["src_app_features_admin-page_admin-page_module_ts"],{1046:(nt,B,l)=>{l.r(B),l.d(B,{AdminPageModule:()=>it});var D=l(8434),V=l(9417),x=l(33),g=l(5964),a=l(5558),u=l(8141),f=l(6354),c=function(n){return n.EDIT="EDIT",n.DELETE="DELETE",n.REVOKE="REVOKE",n.ADD="ADD",n.MANAGE="MANAGE",n.GET_ACCESS_KEY="GET_ACCESS_KEY",n}(c||{});const d={ADD:{name:"Add",icon:"add",action:c.ADD},EDIT:{name:"Edit",icon:"edit",action:c.EDIT},DELETE:{name:"Delete",icon:"delete",action:c.DELETE},REVOKE:{name:"Reset to fallback",icon:"key_off",action:c.REVOKE},GET_ACCESS_KEY:{name:"Get access key",icon:"key",action:c.GET_ACCESS_KEY}},Q=[d.EDIT,d.REVOKE],J=[{title:"User name",key:"username"},{title:"Permissions",key:"permission"},{title:"Kind",key:"kind"}];var v=l(113),e=l(1360),p=l(3160),S=l(8342),F=l(4049),O=l(3996);let M=(()=>{class n{constructor(t){this.dialog=t}openEditPermissionsModal(t,i,s){return this.dialog.open(F.rs,{data:{targetEntity:i,entity:t,currentPermission:s}}).afterClosed()}openGrantPermissionModal(t=v.D2.EXPERIMENT,i,s){return this.dialog.open(F.Kb,{data:{entityType:t,entities:i,targetName:s}}).afterClosed()}static{this.\u0275fac=function(i){return new(i||n)(e.KVO(O.bZ))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _=l(5417),T=l(5975),U=l(8834);let Z=(()=>{class n{constructor(t,i,s,o,r,h){this.experimentDataService=t,this.permissionDataService=i,this.userDataService=s,this.route=o,this.permissionModalService=r,this.snackBarService=h,this.userColumnConfig=J,this.actions=Q,this.userDataSource=[]}ngOnInit(){this.experimentId=this.route.snapshot.paramMap.get("id")??"",this.experimentDataService.getUsersForExperiment(this.experimentId).subscribe(t=>this.userDataSource=t)}handleUserEdit(t){this.permissionModalService.openEditPermissionsModal(this.experimentId,t.username,t.permission).pipe((0,g.p)(Boolean),(0,a.n)(i=>this.permissionDataService.updateExperimentPermission({experiment_id:this.experimentId,permission:i,username:t.username})),(0,u.M)(()=>this.snackBarService.openSnackBar("Permissions updated successfully")),(0,a.n)(()=>this.experimentDataService.getUsersForExperiment(this.experimentId))).subscribe(i=>{this.userDataSource=i})}handleActions(t){const s={[c.EDIT]:this.handleUserEdit.bind(this),[c.REVOKE]:this.revokePermissionForUser.bind(this)}[t.action.action];s&&s(t.item)}revokePermissionForUser(t){this.permissionDataService.deleteExperimentPermission({experiment_id:this.experimentId,username:t.username}).pipe((0,u.M)(()=>this.snackBarService.openSnackBar("Permission revoked successfully")),(0,a.n)(()=>this.loadUsersForExperiment(this.experimentId))).subscribe(i=>this.userDataSource=i)}handleAddEntity(t,i){const s=t.filter(o=>!this.userDataSource.some(r=>r.username===o));this.permissionModalService.openGrantPermissionModal(i,s.map((o,r)=>({id:`${r}-${o}`,name:o})),this.experimentId).pipe((0,g.p)(Boolean),(0,a.n)(({entity:o,permission:r})=>this.permissionDataService.createExperimentPermission({experiment_id:this.experimentId,permission:r,username:o.name})),(0,a.n)(()=>this.loadUsersForExperiment(this.experimentId))).subscribe(o=>{this.userDataSource=o})}addUser(){this.userDataService.getAllUsers().pipe((0,f.T)(({users:t})=>t)).subscribe(t=>this.handleAddEntity(t,v.D2.USER))}addServiceAccount(){this.userDataService.getAllServiceUsers().pipe((0,f.T)(({users:t})=>t)).subscribe(t=>this.handleAddEntity(t,v.D2.SERVICE_ACCOUNT))}loadUsersForExperiment(t){return this.experimentDataService.getUsersForExperiment(t)}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(p.qN),e.rXU(p.jd),e.rXU(p.Je),e.rXU(S.nX),e.rXU(M),e.rXU(p.vH))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["ml-experiment-permission-details"]],standalone:!1,decls:15,vars:3,consts:[[1,"my-3"],[1,"header-section"],["mat-button","",3,"click"],[3,"action","columnConfig","data","actions"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h3"),e.EFF(3,"Experiment Access"),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return s.addUser()}),e.j41(5,"mat-icon"),e.EFF(6,"add"),e.k0s(),e.j41(7,"span"),e.EFF(8,"Add"),e.k0s()(),e.j41(9,"button",2),e.bIt("click",function(){return s.addServiceAccount()}),e.j41(10,"mat-icon"),e.EFF(11,"add"),e.k0s(),e.j41(12,"span"),e.EFF(13,"Add Service Account"),e.k0s()()(),e.j41(14,"ml-table",3),e.bIt("action",function(r){return s.handleActions(r)}),e.k0s()()),2&i&&(e.R7$(14),e.Y8G("columnConfig",s.userColumnConfig)("data",s.userDataSource)("actions",s.actions))},dependencies:[_.O,T.An,U.$z],encapsulation:2})}}return n})();const W=[d.EDIT,d.REVOKE],w=[{title:"User name",key:"username"},{title:"Permissions",key:"permission"},{title:"Kind",key:"kind"}];function q(n,E){if(1&n){const t=e.RV6();e.j41(0,"ml-table",4),e.bIt("action",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.handleActions(s))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("columnConfig",t.userColumnConfig)("data",t.userDataSource)("actions",t.actions)}}let ee=(()=>{class n{constructor(t,i,s,o,r,h){this.route=t,this.promptDataService=i,this.permissionDataService=s,this.userDataService=o,this.snackService=r,this.permissionModalService=h,this.userDataSource=[],this.userColumnConfig=w,this.actions=W}ngOnInit(){this.promptId=this.route.snapshot.paramMap.get("id")??"",this.loadUsersForPrompt(this.promptId).subscribe(t=>this.userDataSource=t)}revokePermissionForUser(t){this.permissionDataService.deletePromptPermission({name:this.promptId,username:t.username}).pipe((0,u.M)(()=>this.snackService.openSnackBar("Permission revoked successfully")),(0,a.n)(()=>this.loadUsersForPrompt(this.promptId))).subscribe(i=>this.userDataSource=i)}editPermissionForUser({username:t,permission:i}){this.permissionModalService.openEditPermissionsModal(this.promptId,t,i).pipe((0,g.p)(Boolean),(0,a.n)(s=>this.permissionDataService.updatePromptPermission({name:this.promptId,permission:s,username:t})),(0,u.M)(()=>this.snackService.openSnackBar("Permission updated")),(0,a.n)(()=>this.loadUsersForPrompt(this.promptId))).subscribe(s=>{this.userDataSource=s})}handleActions({action:t,item:i}){const o={[c.REVOKE]:this.revokePermissionForUser.bind(this),[c.EDIT]:this.editPermissionForUser.bind(this)}[t.action];o&&o(i)}loadUsersForPrompt(t){return this.promptDataService.getUsersForPrompt(t)}handleAddEntity(t,i){const s=t.filter(o=>!this.userDataSource.some(r=>r.username===o));this.permissionModalService.openGrantPermissionModal(i,s.map((o,r)=>({id:r+o,name:o})),this.promptId).pipe((0,g.p)(Boolean),(0,a.n)(({entity:o,permission:r})=>this.permissionDataService.createPromptPermission({name:this.promptId,permission:r,username:o.name})),(0,a.n)(()=>this.loadUsersForPrompt(this.promptId))).subscribe(o=>{this.userDataSource=o})}addUser(){this.userDataService.getAllUsers().pipe((0,f.T)(({users:t})=>t)).subscribe(t=>this.handleAddEntity(t,v.D2.USER))}addServiceAccount(){this.userDataService.getAllServiceUsers().pipe((0,f.T)(({users:t})=>t)).subscribe(t=>this.handleAddEntity(t,v.D2.SERVICE_ACCOUNT))}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(S.nX),e.rXU(p.fo),e.rXU(p.jd),e.rXU(p.Je),e.rXU(p.vH),e.rXU(M))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["ml-prompt-permission-details"]],standalone:!1,decls:15,vars:1,consts:[[1,"my-3"],[1,"header-section"],["mat-button","",3,"click"],[3,"columnConfig","data","actions","action",4,"ngIf"],[3,"action","columnConfig","data","actions"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h3"),e.EFF(3,"Prompt Access"),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return s.addUser()}),e.j41(5,"mat-icon"),e.EFF(6,"add"),e.k0s(),e.j41(7,"span"),e.EFF(8,"Add"),e.k0s()(),e.j41(9,"button",2),e.bIt("click",function(){return s.addServiceAccount()}),e.j41(10,"mat-icon"),e.EFF(11,"add"),e.k0s(),e.j41(12,"span"),e.EFF(13,"Add Service Account"),e.k0s()()(),e.DNE(14,q,1,3,"ml-table",3),e.k0s()),2&i&&(e.R7$(14),e.Y8G("ngIf",s.userDataSource.length))},dependencies:[D.bT,_.O,T.An,U.$z],encapsulation:2})}}return n})();const te=[d.EDIT,d.REVOKE],ie=[{title:"User name",key:"username"},{title:"Permissions",key:"permission"},{title:"Kind",key:"kind"}];function se(n,E){if(1&n){const t=e.RV6();e.j41(0,"ml-table",4),e.bIt("action",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.handleActions(s))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("columnConfig",t.userColumnConfig)("data",t.userDataSource)("actions",t.actions)}}let ne=(()=>{class n{constructor(t,i,s,o,r,h){this.route=t,this.modelDataService=i,this.permissionDataService=s,this.userDataService=o,this.snackService=r,this.permissionModalService=h,this.userDataSource=[],this.userColumnConfig=ie,this.actions=te}ngOnInit(){this.modelId=this.route.snapshot.paramMap.get("id")??"",this.loadUsersForModel(this.modelId).subscribe(t=>this.userDataSource=t)}revokePermissionForUser(t){this.permissionDataService.deleteModelPermission({name:this.modelId,username:t.username}).pipe((0,u.M)(()=>this.snackService.openSnackBar("Permission revoked successfully")),(0,a.n)(()=>this.loadUsersForModel(this.modelId))).subscribe(i=>this.userDataSource=i)}editPermissionForUser({username:t,permission:i}){this.permissionModalService.openEditPermissionsModal(this.modelId,t,i).pipe((0,g.p)(Boolean),(0,a.n)(s=>this.permissionDataService.updateModelPermission({name:this.modelId,permission:s,username:t})),(0,u.M)(()=>this.snackService.openSnackBar("Permission updated")),(0,a.n)(()=>this.loadUsersForModel(this.modelId))).subscribe(s=>{this.userDataSource=s})}handleActions({action:t,item:i}){const o={[c.REVOKE]:this.revokePermissionForUser.bind(this),[c.EDIT]:this.editPermissionForUser.bind(this)}[t.action];o&&o(i)}loadUsersForModel(t){return this.modelDataService.getUsersForModel(t)}handleAddEntity(t,i){const s=t.filter(o=>!this.userDataSource.some(r=>r.username===o));this.permissionModalService.openGrantPermissionModal(i,s.map((o,r)=>({id:r+o,name:o})),this.modelId).pipe((0,g.p)(Boolean),(0,a.n)(({entity:o,permission:r})=>this.permissionDataService.createModelPermission({name:this.modelId,permission:r,username:o.name})),(0,a.n)(()=>this.loadUsersForModel(this.modelId))).subscribe(o=>{this.userDataSource=o})}addUser(){this.userDataService.getAllUsers().pipe((0,f.T)(({users:t})=>t)).subscribe(t=>this.handleAddEntity(t,v.D2.USER))}addServiceAccount(){this.userDataService.getAllServiceUsers().pipe((0,f.T)(({users:t})=>t)).subscribe(t=>this.handleAddEntity(t,v.D2.SERVICE_ACCOUNT))}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(S.nX),e.rXU(p.EE),e.rXU(p.jd),e.rXU(p.Je),e.rXU(p.vH),e.rXU(M))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["ml-model-permission-details"]],standalone:!1,decls:15,vars:1,consts:[[1,"my-3"],[1,"header-section"],["mat-button","",3,"click"],[3,"columnConfig","data","actions","action",4,"ngIf"],[3,"action","columnConfig","data","actions"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h3"),e.EFF(3,"Model Access"),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return s.addUser()}),e.j41(5,"mat-icon"),e.EFF(6,"add"),e.k0s(),e.j41(7,"span"),e.EFF(8,"Add"),e.k0s()(),e.j41(9,"button",2),e.bIt("click",function(){return s.addServiceAccount()}),e.j41(10,"mat-icon"),e.EFF(11,"add"),e.k0s(),e.j41(12,"span"),e.EFF(13,"Add Service Account"),e.k0s()()(),e.DNE(14,se,1,3,"ml-table",3),e.k0s()),2&i&&(e.R7$(14),e.Y8G("ngIf",s.userDataSource.length))},dependencies:[D.bT,_.O,T.An,U.$z],encapsulation:2})}}return n})();var oe=l(7468),I=l(5412);const re=[{title:"Model name",key:"name"},{title:"Permissions",key:"permission"},{title:"Type",key:"type"}],ae=[{title:"Prompt name",key:"name"},{title:"Permissions",key:"permission"},{title:"Type",key:"type"}],ce=[{title:"Experiment Name",key:"name"},{title:"Permission",key:"permission"},{title:"Type",key:"type"}],me=[d.EDIT,d.REVOKE],le=[d.EDIT,d.REVOKE],pe=[d.EDIT,d.REVOKE];var P=l(6850);const de=["userTabs"];function ue(n,E){if(1&n){const t=e.RV6();e.j41(0,"ml-table",8),e.bIt("action",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.handleExperimentActions(s))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("columnConfig",t.experimentsColumnConfig)("data",t.experimentsDataSource)("actions",t.experimentsActions)}}function he(n,E){if(1&n){const t=e.RV6();e.j41(0,"ml-table",8),e.bIt("action",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.handleModelActions(s))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("columnConfig",t.modelsColumnConfig)("data",t.modelsDataSource)("actions",t.modelsActions)}}function Se(n,E){if(1&n){const t=e.RV6();e.j41(0,"ml-table",8),e.bIt("action",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePromptActions(s))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("columnConfig",t.promptsColumnConfig)("data",t.promptsDataSource)("actions",t.promptsActions)}}let N=(()=>{class n{constructor(t,i,s,o,r,h,j,R){this.expDataService=t,this.modelDataService=i,this.promptDataService=s,this.permissionDataService=o,this.route=r,this.permissionModalService=h,this.snackBarService=j,this.router=R,this.userId="",this.experimentsColumnConfig=ce,this.modelsColumnConfig=re,this.promptsColumnConfig=ae,this.experimentsDataSource=[],this.modelsDataSource=[],this.promptsDataSource=[],this.experimentsActions=me,this.modelsActions=le,this.promptsActions=pe,this.tabIndexMapping=["experiments","models","prompts"]}ngOnInit(){this.userId=this.route.snapshot.paramMap.get("id")??"",(0,oe.p)([this.expDataService.getExperimentsForUser(this.userId),this.modelDataService.getModelsForUser(this.userId),this.promptDataService.getPromptsForUser(this.userId)]).subscribe(([t,i,s])=>{this.experimentsDataSource=t,this.modelsDataSource=i,this.promptsDataSource=s})}ngAfterViewInit(){const t=String(this.route.snapshot.url[2]);this.permissionsTabs.selectedIndex=t?this.tabIndexMapping.indexOf(t):0}addModelPermissionToUser(){return this.modelDataService.getAllModels().pipe((0,f.T)(t=>t.map((i,s)=>({...i,id:`${s}-${i.name}`}))),(0,f.T)(t=>t.filter(i=>!this.modelsDataSource.some(s=>s.name===i.name))),(0,a.n)(t=>this.permissionModalService.openGrantPermissionModal(v.D2.MODEL,t,this.userId)),(0,g.p)(Boolean),(0,a.n)(({entity:t,permission:i})=>this.permissionDataService.createModelPermission({username:this.userId,name:t.name,permission:i})),(0,u.M)(()=>this.snackBarService.openSnackBar("Permission granted successfully")),(0,a.n)(()=>this.modelDataService.getModelsForUser(this.userId))).subscribe(t=>this.modelsDataSource=t)}addExperimentPermissionToUser(){this.expDataService.getAllExperiments().pipe((0,f.T)(t=>t.filter(i=>!this.experimentsDataSource.some(s=>s.id===i.id))),(0,a.n)(t=>this.permissionModalService.openGrantPermissionModal(v.D2.EXPERIMENT,t,this.userId)),(0,g.p)(Boolean),(0,a.n)(({entity:t,permission:i})=>this.permissionDataService.createExperimentPermission({username:this.userId,experiment_name:t.name,permission:i})),(0,u.M)(()=>this.snackBarService.openSnackBar("Permission granted successfully")),(0,a.n)(()=>this.expDataService.getExperimentsForUser(this.userId))).subscribe(t=>this.experimentsDataSource=t)}handleExperimentActions(t){const s={[c.EDIT]:this.handleEditUserPermissionForExperiment.bind(this),[c.REVOKE]:this.revokeExperimentPermissionForUser.bind(this)}[t.action.action];s&&s(t.item)}revokeExperimentPermissionForUser(t){t.type===I.tX.USER?this.permissionDataService.deleteExperimentPermission({experiment_id:t.id,username:this.userId}).pipe((0,u.M)(()=>this.snackBarService.openSnackBar("Permission revoked successfully")),(0,a.n)(()=>this.expDataService.getExperimentsForUser(this.userId))).subscribe(i=>this.experimentsDataSource=i):this.snackBarService.openSnackBar("Nothing to reset")}revokeModelPermissionForUser({name:t,type:i}){i===I.tX.USER?this.permissionDataService.deleteModelPermission({name:t,username:this.userId}).pipe((0,u.M)(()=>this.snackBarService.openSnackBar("Permission revoked successfully")),(0,a.n)(()=>this.modelDataService.getModelsForUser(this.userId))).subscribe(s=>this.modelsDataSource=s):this.snackBarService.openSnackBar("Nothing to reset")}handleModelActions({action:t,item:i}){const o={[c.EDIT]:this.handleEditUserPermissionForModel.bind(this),[c.REVOKE]:this.revokeModelPermissionForUser.bind(this)}[t.action];o&&o(i)}handleEditUserPermissionForModel({name:t,permission:i,type:s}){this.permissionModalService.openEditPermissionsModal(t,this.userId,i).pipe((0,g.p)(Boolean),(0,a.n)(o=>{const r={name:t,permission:o,username:this.userId};return s===I.tX.FALLBACK?this.permissionDataService.createModelPermission(r):this.permissionDataService.updateModelPermission(r)}),(0,u.M)(()=>this.snackBarService.openSnackBar("Permissions updated successfully")),(0,a.n)(()=>this.modelDataService.getModelsForUser(this.userId))).subscribe(o=>this.modelsDataSource=o)}handleEditUserPermissionForExperiment({id:t,permission:i,type:s}){this.permissionModalService.openEditPermissionsModal(t,this.userId,i).pipe((0,g.p)(Boolean),(0,a.n)(o=>{const r={experiment_id:t,permission:o,username:this.userId};return s===I.tX.FALLBACK?this.permissionDataService.createExperimentPermission(r):this.permissionDataService.updateExperimentPermission(r)}),(0,u.M)(()=>this.snackBarService.openSnackBar("Permissions updated successfully")),(0,a.n)(()=>this.expDataService.getExperimentsForUser(this.userId))).subscribe(o=>this.experimentsDataSource=o)}handlePromptActions({action:t,item:i}){const o={[c.EDIT]:this.handleEditUserPermissionForPrompt.bind(this),[c.REVOKE]:this.revokePromptPermissionForUser.bind(this)}[t.action];o&&o(i)}handleEditUserPermissionForPrompt({name:t,permission:i,type:s}){this.permissionModalService.openEditPermissionsModal(t,this.userId,i).pipe((0,g.p)(Boolean),(0,a.n)(o=>{const r={name:t,permission:o,username:this.userId};return s===I.tX.FALLBACK?this.permissionDataService.createPromptPermission(r):this.permissionDataService.updatePromptPermission(r)}),(0,u.M)(()=>this.snackBarService.openSnackBar("Permissions updated successfully")),(0,a.n)(()=>this.promptDataService.getPromptsForUser(this.userId))).subscribe(o=>this.promptsDataSource=o)}revokePromptPermissionForUser({name:t,type:i}){i===I.tX.USER?this.permissionDataService.deletePromptPermission({name:t,username:this.userId}).pipe((0,u.M)(()=>this.snackBarService.openSnackBar("Permission revoked successfully")),(0,a.n)(()=>this.promptDataService.getPromptsForUser(this.userId))).subscribe(s=>this.promptsDataSource=s):this.snackBarService.openSnackBar("Nothing to reset")}handleTabSelection(t){this.router.navigate([`../${this.tabIndexMapping[t]}`],{relativeTo:this.route})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(p.qN),e.rXU(p.EE),e.rXU(p.fo),e.rXU(p.jd),e.rXU(S.nX),e.rXU(M),e.rXU(p.vH),e.rXU(S.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["ml-user-permission-details"]],viewQuery:function(i,s){if(1&i&&e.GBs(de,5),2&i){let o;e.mGM(o=e.lsd())&&(s.permissionsTabs=o.first)}},standalone:!1,decls:14,vars:3,consts:[["userTabs",""],[3,"selectedIndexChange"],["label","Experiments"],[1,"my-3"],[1,"header-section"],[3,"columnConfig","data","actions","action",4,"ngIf"],["label","Models"],["label","Prompts"],[3,"action","columnConfig","data","actions"]],template:function(i,s){if(1&i){const o=e.RV6();e.j41(0,"mat-tab-group",1,0),e.bIt("selectedIndexChange",function(h){return e.eBV(o),e.Njj(s.handleTabSelection(h))}),e.j41(2,"mat-tab",2)(3,"div",3),e.nrm(4,"div",4),e.DNE(5,ue,1,3,"ml-table",5),e.k0s()(),e.j41(6,"mat-tab",6)(7,"div",3),e.nrm(8,"div",4),e.DNE(9,he,1,3,"ml-table",5),e.k0s()(),e.j41(10,"mat-tab",7)(11,"div",3),e.nrm(12,"div",4),e.DNE(13,Se,1,3,"ml-table",5),e.k0s()()()}2&i&&(e.R7$(5),e.Y8G("ngIf",s.experimentsDataSource.length),e.R7$(4),e.Y8G("ngIf",s.modelsDataSource.length),e.R7$(4),e.Y8G("ngIf",s.promptsDataSource.length))},dependencies:[D.bT,_.O,P.mq,P.T8],styles:[".header-section[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:36px}.header-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;padding:0}"]})}}return n})();const ge=[{title:"Experiment name",key:"name"},{title:"Permission",key:"permission"}],Ee=[d.EDIT,d.REVOKE],fe=[{title:"Model name",key:"name"},{title:"Permission",key:"permission"}],ve=[d.EDIT,d.REVOKE],_e=[{title:"Prompt name",key:"name"},{title:"Permission",key:"permission"}],De=[d.EDIT,d.REVOKE];var G=l(2299),be=l(3165);let X=(()=>{class n{constructor(t){this.http=t}getAllGroups(){return this.http.get(G.H.ALL_GROUPS)}getAllExperimentsForGroup(t){return this.http.get(G.H.EXPERIMENTS_FOR_GROUP.replace("${groupName}",t))}getAllRegisteredModelsForGroup(t){return this.http.get(G.H.MODELS_FOR_GROUP.replace("${groupName}",t))}getAllPromptsForGroup(t){return this.http.get(G.H.PROMPTS_FOR_GROUP.replace("${groupName}",t))}static{this.\u0275fac=function(i){return new(i||n)(e.KVO(be.Qq))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Pe=["permissionsTabs"];let y=(()=>{class n{constructor(t,i,s,o,r,h,j,R,st){this.groupDataService=t,this.route=i,this.permissionDataService=s,this.permissionModalService=o,this.experimentsDataService=r,this.snackBarService=h,this.modelDataService=j,this.promptDataService=R,this.router=st,this.groupName="",this.experimentColumnConfig=ge,this.experimentDataSource=[],this.experimentActions=Ee,this.modelColumnConfig=fe,this.modelDataSource=[],this.modelActions=ve,this.promptColumnConfig=_e,this.promptDataSource=[],this.promptActions=De,this.tabIndexMapping=["experiments","models","prompts"]}ngOnInit(){this.groupName=this.route.snapshot.paramMap.get("id")??"",this.groupDataService.getAllExperimentsForGroup(this.groupName).subscribe(t=>this.experimentDataSource=t),this.groupDataService.getAllRegisteredModelsForGroup(this.groupName).subscribe(t=>this.modelDataSource=t),this.groupDataService.getAllPromptsForGroup(this.groupName).subscribe(t=>this.promptDataSource=t)}ngAfterViewInit(){const t=String(this.route.snapshot.url[2]);this.permissionsTabs.selectedIndex=t?this.tabIndexMapping.indexOf(t):0}openModalAddExperimentPermissionToGroup(){this.experimentsDataService.getAllExperiments().pipe((0,f.T)(t=>t.filter(i=>!this.experimentDataSource.some(s=>s.name===i.name))),(0,a.n)(t=>this.permissionModalService.openGrantPermissionModal(v.D2.EXPERIMENT,t,this.groupName)),(0,g.p)(Boolean),(0,a.n)(t=>this.permissionDataService.addExperimentPermissionToGroup(this.groupName,t.entity.id,t.permission)),(0,u.M)(()=>this.snackBarService.openSnackBar("Permission granted successfully")),(0,a.n)(()=>this.groupDataService.getAllExperimentsForGroup(this.groupName))).subscribe(t=>this.experimentDataSource=t)}openModalAddModelPermissionToGroup(){this.modelDataService.getAllModels().pipe((0,f.T)(t=>t.filter(i=>!this.modelDataSource.some(s=>s.name===i.name)).map((i,s)=>({...i,id:`${s}-${i.name}`}))),(0,a.n)(t=>this.permissionModalService.openGrantPermissionModal(v.D2.MODEL,t,this.groupName)),(0,g.p)(Boolean),(0,a.n)(t=>this.permissionDataService.addModelPermissionToGroup(t.entity.name,this.groupName,t.permission)),(0,u.M)(()=>this.snackBarService.openSnackBar("Permission granted successfully")),(0,a.n)(()=>this.groupDataService.getAllRegisteredModelsForGroup(this.groupName))).subscribe(t=>this.modelDataSource=t)}openModalAddPromptPermissionToGroup(){this.promptDataService.getAllPrompts().pipe((0,f.T)(t=>t.filter(i=>!this.promptDataSource.some(s=>s.name===i.name)).map((i,s)=>({...i,id:`${s}-${i.name}`}))),(0,a.n)(t=>this.permissionModalService.openGrantPermissionModal(v.D2.PROMPT,t,this.groupName)),(0,g.p)(Boolean),(0,a.n)(t=>this.permissionDataService.addPromptPermissionToGroup(t.entity.name,this.groupName,t.permission)),(0,u.M)(()=>this.snackBarService.openSnackBar("Permission granted successfully")),(0,a.n)(()=>this.groupDataService.getAllPromptsForGroup(this.groupName))).subscribe(t=>this.promptDataSource=t)}handleExperimentActions(t){const s={[c.EDIT]:this.handleEditExperimentPermissionForGroup.bind(this),[c.REVOKE]:this.revokeExperimentPermissionForGroup.bind(this)}[t.action.action];s&&s(t.item)}handleEditExperimentPermissionForGroup(t){this.permissionModalService.openEditPermissionsModal(t.name,this.groupName,t.permission).pipe((0,g.p)(Boolean),(0,a.n)(i=>this.permissionDataService.updateExperimentPermissionForGroup(this.groupName,t.id,i)),(0,u.M)(()=>this.snackBarService.openSnackBar("Permission updated successfully")),(0,a.n)(()=>this.groupDataService.getAllExperimentsForGroup(this.groupName))).subscribe(i=>this.experimentDataSource=i)}revokeExperimentPermissionForGroup(t){this.permissionDataService.removeExperimentPermissionFromGroup(this.groupName,t.id).pipe((0,u.M)(()=>this.snackBarService.openSnackBar("Permission revoked successfully")),(0,a.n)(()=>this.groupDataService.getAllExperimentsForGroup(this.groupName))).subscribe(i=>this.experimentDataSource=i)}handleModelActions(t){const s={[c.EDIT]:this.handleEditModelPermissionForGroup.bind(this),[c.REVOKE]:this.revokeModelPermissionForGroup.bind(this)}[t.action.action];s&&s(t.item)}handleEditModelPermissionForGroup(t){this.permissionModalService.openEditPermissionsModal(t.name,this.groupName,t.permission).pipe((0,g.p)(Boolean),(0,a.n)(i=>this.permissionDataService.updateModelPermissionForGroup(t.name,this.groupName,i)),(0,u.M)(()=>this.snackBarService.openSnackBar("Permission updated successfully")),(0,a.n)(()=>this.groupDataService.getAllRegisteredModelsForGroup(this.groupName))).subscribe(i=>this.modelDataSource=i)}revokeModelPermissionForGroup(t){this.permissionDataService.removeModelPermissionFromGroup(t.name,this.groupName).pipe((0,u.M)(()=>this.snackBarService.openSnackBar("Permission revoked successfully")),(0,a.n)(()=>this.groupDataService.getAllRegisteredModelsForGroup(this.groupName))).subscribe(i=>this.modelDataSource=i)}handlePromptActions(t){const s={[c.EDIT]:this.handleEditPromptPermissionForGroup.bind(this),[c.REVOKE]:this.revokePromptPermissionForGroup.bind(this)}[t.action.action];s&&s(t.item)}handleEditPromptPermissionForGroup(t){this.permissionModalService.openEditPermissionsModal(t.name,this.groupName,t.permission).pipe((0,g.p)(Boolean),(0,a.n)(i=>this.permissionDataService.updatePromptPermissionForGroup(t.name,this.groupName,i)),(0,u.M)(()=>this.snackBarService.openSnackBar("Permission updated successfully")),(0,a.n)(()=>this.groupDataService.getAllPromptsForGroup(this.groupName))).subscribe(i=>this.promptDataSource=i)}revokePromptPermissionForGroup(t){this.permissionDataService.removePromptPermissionFromGroup(t.name,this.groupName).pipe((0,u.M)(()=>this.snackBarService.openSnackBar("Permission revoked successfully")),(0,a.n)(()=>this.groupDataService.getAllPromptsForGroup(this.groupName))).subscribe(i=>this.promptDataSource=i)}handleTabSelection(t){this.router.navigate([`../${this.tabIndexMapping[t]}`],{relativeTo:this.route})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(X),e.rXU(S.nX),e.rXU(p.jd),e.rXU(M),e.rXU(p.qN),e.rXU(p.vH),e.rXU(p.EE),e.rXU(p.fo),e.rXU(S.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["ml-group-permission-details"]],viewQuery:function(i,s){if(1&i&&e.GBs(Pe,5),2&i){let o;e.mGM(o=e.lsd())&&(s.permissionsTabs=o.first)}},standalone:!1,decls:29,vars:9,consts:[["permissionsTabs",""],[3,"selectedIndexChange"],["label","Experiments"],[1,"my-3"],[1,"header-section"],["mat-button","",3,"click"],[3,"action","columnConfig","data","actions"],["label","Models"],["label","Prompts"]],template:function(i,s){if(1&i){const o=e.RV6();e.j41(0,"mat-tab-group",1,0),e.bIt("selectedIndexChange",function(h){return e.eBV(o),e.Njj(s.handleTabSelection(h))}),e.j41(2,"mat-tab",2)(3,"div",3)(4,"div",4)(5,"button",5),e.bIt("click",function(){return e.eBV(o),e.Njj(s.openModalAddExperimentPermissionToGroup())}),e.j41(6,"mat-icon"),e.EFF(7,"add"),e.k0s(),e.j41(8,"span"),e.EFF(9,"Add"),e.k0s()()()(),e.j41(10,"ml-table",6),e.bIt("action",function(h){return e.eBV(o),e.Njj(s.handleExperimentActions(h))}),e.k0s()(),e.j41(11,"mat-tab",7)(12,"div",3)(13,"div",4)(14,"button",5),e.bIt("click",function(){return e.eBV(o),e.Njj(s.openModalAddModelPermissionToGroup())}),e.j41(15,"mat-icon"),e.EFF(16,"add"),e.k0s(),e.j41(17,"span"),e.EFF(18,"Add"),e.k0s()()()(),e.j41(19,"ml-table",6),e.bIt("action",function(h){return e.eBV(o),e.Njj(s.handleModelActions(h))}),e.k0s()(),e.j41(20,"mat-tab",8)(21,"div",3)(22,"div",4)(23,"button",5),e.bIt("click",function(){return e.eBV(o),e.Njj(s.openModalAddPromptPermissionToGroup())}),e.j41(24,"mat-icon"),e.EFF(25,"add"),e.k0s(),e.j41(26,"span"),e.EFF(27,"Add"),e.k0s()()()(),e.j41(28,"ml-table",6),e.bIt("action",function(h){return e.eBV(o),e.Njj(s.handlePromptActions(h))}),e.k0s()()()}2&i&&(e.R7$(10),e.Y8G("columnConfig",s.experimentColumnConfig)("data",s.experimentDataSource)("actions",s.experimentActions),e.R7$(9),e.Y8G("columnConfig",s.modelColumnConfig)("data",s.modelDataSource)("actions",s.modelActions),e.R7$(9),e.Y8G("columnConfig",s.promptColumnConfig)("data",s.promptDataSource)("actions",s.promptActions))},dependencies:[_.O,T.An,U.$z,P.mq,P.T8],encapsulation:2})}}return n})();var m=function(n){return n.PERMISSIONS="permissions",n.USER="user",n.EXPERIMENT="experiment",n.MODEL="model",n.GROUP="group",n.USERS="users",n.EXPERIMENTS="experiments",n.MODELS="models",n.GROUPS="groups",n.PROMPT="prompt",n.PROMPTS="prompts",n}(m||{}),C=l(980);const L=[{title:"User name",key:"username"}],Ce=[d.EDIT],Ie=[d.EDIT,d.DELETE,d.GET_ACCESS_KEY];var Me=l(9994);let Te=(()=>{class n{constructor(t){this.dialog=t}openCreateServiceAccountModal(t){return this.dialog.open(Me.r,{data:t}).afterClosed()}static{this.\u0275fac=function(i){return new(i||n)(e.KVO(O.bZ))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var A=l(9183);function Ue(n,E){if(1&n){const t=e.RV6();e.j41(0,"ml-table",6),e.bIt("action",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.handleItemAction(s))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("columnConfig",t.columnConfig)("data",t.dataSource)("actions",t.actions)}}function Ae(n,E){if(1&n){const t=e.RV6();e.j41(0,"ml-table",6),e.bIt("action",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.handleServiceAccountAction(s))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("columnConfig",t.serviceAccountColumnConfig)("data",t.serviceAccountsDataSource)("actions",t.serviceAccountActions)}}function ke(n,E){1&n&&(e.j41(0,"div",7),e.nrm(1,"mat-spinner",8),e.k0s()),2&n&&(e.R7$(),e.Y8G("diameter",40))}let Ge=(()=>{class n{constructor(t,i,s,o,r){this.router=t,this.route=i,this.dialog=s,this.userDataService=o,this.createServiceAccountService=r,this.columnConfig=L,this.serviceAccountColumnConfig=L,this.actions=Ce,this.serviceAccountActions=Ie,this.dataSource=[],this.serviceAccountsDataSource=[],this.isLoading=!1,this.isServiceAccountsLoading=!1}ngOnInit(){this.isLoading=!0,this.userDataService.getAllUsers().pipe((0,C.j)(()=>this.isLoading=!1)).subscribe(({users:t})=>this.dataSource=t.map(i=>({username:i}))),this.isServiceAccountsLoading=!0,this.userDataService.getAllServiceUsers().pipe((0,C.j)(()=>this.isServiceAccountsLoading=!1)).subscribe(({users:t})=>this.serviceAccountsDataSource=t.map(i=>({username:i})))}handleItemAction({action:t,item:i}){const o={[c.EDIT]:this.handleUserEdit.bind(this)}[t.action];o&&o(i)}handleServiceAccountAction({action:t,item:i}){const o={[c.EDIT]:this.handleUserEdit.bind(this),[c.DELETE]:this.handleServiceAccountDelete.bind(this),[c.GET_ACCESS_KEY]:this.handleAccessKey.bind(this)}[t.action];o&&o(i)}handleUserEdit({username:t}){this.router.navigate([`../${m.USER}/`+t],{relativeTo:this.route})}handleServiceAccountDelete({username:t}){this.userDataService.deleteUser({username:t}).subscribe(()=>{this.isServiceAccountsLoading=!0,this.userDataService.getAllServiceUsers().pipe((0,C.j)(()=>this.isServiceAccountsLoading=!1)).subscribe(({users:i})=>this.serviceAccountsDataSource=i.map(s=>({username:s})))})}createServiceAccount(){this.createServiceAccountService.openCreateServiceAccountModal({title:"Create Service Account"}).subscribe(t=>{t&&this.userDataService.createServiceAccount(t).subscribe(()=>{this.isServiceAccountsLoading=!0,this.userDataService.getAllServiceUsers().pipe((0,C.j)(()=>this.isServiceAccountsLoading=!1)).subscribe(({users:i})=>this.serviceAccountsDataSource=i.map(s=>({username:s})))})})}handleAccessKey({username:t}){this.userDataService.getUserAccessKey(t).subscribe(({token:i})=>{this.dialog.open(F.ad,{data:{token:i}})})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(S.Ix),e.rXU(S.nX),e.rXU(O.bZ),e.rXU(p.Je),e.rXU(Te))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["ml-user-permissions"]],standalone:!1,decls:13,vars:4,consts:[["loader",""],["label","Users"],[3,"columnConfig","data","actions","action",4,"ngIf","ngIfElse"],["label","Service Accounts"],[1,"header-section"],["mat-button","",3,"click"],[3,"action","columnConfig","data","actions"],[1,"loader","d-flex","justify-content-center","align-items-center","my-5"],[3,"diameter"]],template:function(i,s){if(1&i){const o=e.RV6();e.j41(0,"mat-tab-group")(1,"mat-tab",1),e.DNE(2,Ue,1,3,"ml-table",2),e.k0s(),e.j41(3,"mat-tab",3)(4,"div",4)(5,"button",5),e.bIt("click",function(){return e.eBV(o),e.Njj(s.createServiceAccount())}),e.j41(6,"mat-icon"),e.EFF(7,"add"),e.k0s(),e.j41(8,"span"),e.EFF(9,"Create Service Account"),e.k0s()()(),e.DNE(10,Ae,1,3,"ml-table",2),e.k0s()(),e.DNE(11,ke,2,1,"ng-template",null,0,e.C5r)}if(2&i){const o=e.sdS(12);e.R7$(2),e.Y8G("ngIf",!s.isLoading)("ngIfElse",o),e.R7$(8),e.Y8G("ngIf",!s.isServiceAccountsLoading)("ngIfElse",o)}},dependencies:[D.bT,_.O,T.An,U.$z,P.mq,P.T8,A.LG],encapsulation:2})}}return n})();const xe=[{action:c.EDIT,icon:"edit",name:"Edit"}],Fe=[{title:"Experiment Name",key:"name"}];function Oe(n,E){if(1&n){const t=e.RV6();e.j41(0,"ml-table",2),e.bIt("action",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.handleActions(s))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("columnConfig",t.columnConfig)("data",t.dataSource)("actions",t.actions)}}function Ne(n,E){1&n&&(e.j41(0,"div",3),e.nrm(1,"mat-spinner",4),e.k0s()),2&n&&(e.R7$(),e.Y8G("diameter",40))}let ye=(()=>{class n{constructor(t,i,s){this.router=t,this.route=i,this.experimentDataService=s,this.columnConfig=Fe,this.dataSource=[],this.actions=xe,this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.experimentDataService.getAllExperiments().pipe((0,C.j)(()=>this.isLoading=!1)).subscribe(t=>this.dataSource=t)}handleActions(t){const s={[c.EDIT]:this.handleExperimentEdit.bind(this)}[t.action.action];s&&s(t.item)}handleExperimentEdit({id:t}){this.router.navigate([`../${m.EXPERIMENT}/`+t],{relativeTo:this.route})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(S.Ix),e.rXU(S.nX),e.rXU(p.qN))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["ml-experiment-permissions"]],standalone:!1,decls:3,vars:2,consts:[["loader",""],[3,"columnConfig","data","actions","action",4,"ngIf","ngIfElse"],[3,"action","columnConfig","data","actions"],[1,"loader","d-flex","justify-content-center","align-items-center","my-5"],[3,"diameter"]],template:function(i,s){if(1&i&&e.DNE(0,Oe,1,3,"ml-table",1)(1,Ne,2,1,"ng-template",null,0,e.C5r),2&i){const o=e.sdS(2);e.Y8G("ngIf",!s.isLoading)("ngIfElse",o)}},dependencies:[D.bT,_.O,A.LG],encapsulation:2})}}return n})();const je=[{title:"Model Name",key:"name"}],Re=[d.EDIT];function Be(n,E){if(1&n){const t=e.RV6();e.j41(0,"ml-table",2),e.bIt("action",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.handleAction(s))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("columnConfig",t.columnConfig)("data",t.dataSource)("actions",t.actions)}}function Xe(n,E){1&n&&(e.j41(0,"div",3),e.nrm(1,"mat-spinner",4),e.k0s()),2&n&&(e.R7$(),e.Y8G("diameter",40))}let Le=(()=>{class n{constructor(t,i,s){this.route=t,this.router=i,this.modelDataService=s,this.columnConfig=je,this.dataSource=[],this.actions=Re,this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.modelDataService.getAllModels().pipe((0,C.j)(()=>this.isLoading=!1)).subscribe(t=>{this.dataSource=t})}handleModelEdit({name:t}){this.router.navigate([`../${m.MODEL}/`+t],{relativeTo:this.route})}handleAction({action:t,item:i}){const o={[c.EDIT]:this.handleModelEdit.bind(this)}[t.action];o&&o(i)}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(S.nX),e.rXU(S.Ix),e.rXU(p.EE))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["ml-model-permissions"]],standalone:!1,decls:3,vars:2,consts:[["loader",""],[3,"columnConfig","data","actions","action",4,"ngIf","ngIfElse"],[3,"action","columnConfig","data","actions"],[1,"loader","d-flex","justify-content-center","align-items-center","my-5"],[3,"diameter"]],template:function(i,s){if(1&i&&e.DNE(0,Be,1,3,"ml-table",1)(1,Xe,2,1,"ng-template",null,0,e.C5r),2&i){const o=e.sdS(2);e.Y8G("ngIf",!s.isLoading)("ngIfElse",o)}},dependencies:[D.bT,_.O,A.LG],encapsulation:2})}}return n})();const Ve=[{title:"Prompt Name",key:"name"}],$e=[d.EDIT];function Ke(n,E){if(1&n){const t=e.RV6();e.j41(0,"ml-table",2),e.bIt("action",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.handleAction(s))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("columnConfig",t.columnConfig)("data",t.dataSource)("actions",t.actions)}}function Ye(n,E){1&n&&(e.j41(0,"div",3),e.nrm(1,"mat-spinner",4),e.k0s()),2&n&&(e.R7$(),e.Y8G("diameter",40))}let He=(()=>{class n{constructor(t,i,s){this.route=t,this.router=i,this.promptDataService=s,this.columnConfig=Ve,this.dataSource=[],this.actions=$e,this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.promptDataService.getAllPrompts().pipe((0,C.j)(()=>this.isLoading=!1)).subscribe(t=>{this.dataSource=t})}handlePromptEdit({name:t}){this.router.navigate([`../${m.PROMPT}/`+t],{relativeTo:this.route})}handleAction({action:t,item:i}){const o={[c.EDIT]:this.handlePromptEdit.bind(this)}[t.action];o&&o(i)}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(S.nX),e.rXU(S.Ix),e.rXU(p.fo))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["ml-prompt-permissions"]],standalone:!1,decls:3,vars:2,consts:[["loader",""],[3,"columnConfig","data","actions","action",4,"ngIf","ngIfElse"],[3,"action","columnConfig","data","actions"],[1,"loader","d-flex","justify-content-center","align-items-center","my-5"],[3,"diameter"]],template:function(i,s){if(1&i&&e.DNE(0,Ke,1,3,"ml-table",1)(1,Ye,2,1,"ng-template",null,0,e.C5r),2&i){const o=e.sdS(2);e.Y8G("ngIf",!s.isLoading)("ngIfElse",o)}},dependencies:[D.bT,_.O,A.LG],encapsulation:2})}}return n})();const ze=[{title:"Group name",key:"group"}],Qe=[d.EDIT];function Je(n,E){if(1&n){const t=e.RV6();e.j41(0,"ml-table",2),e.bIt("action",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.handleItemAction(s))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("columnConfig",t.columnConfig)("data",t.dataSource)("actions",t.actions)}}function Ze(n,E){1&n&&(e.j41(0,"div",3),e.nrm(1,"mat-spinner",4),e.k0s()),2&n&&(e.R7$(),e.Y8G("diameter",40))}let We=(()=>{class n{constructor(t,i,s){this.router=t,this.route=i,this.groupDataService=s,this.columnConfig=ze,this.dataSource=[],this.actions=Qe,this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.groupDataService.getAllGroups().pipe((0,C.j)(()=>this.isLoading=!1)).subscribe(({groups:t})=>this.dataSource=t.map(i=>({group:i})))}handleItemAction({action:t,item:i}){const o={[c.EDIT]:this.handleUserEdit.bind(this)}[t.action];o&&o(i)}handleUserEdit({group:t}){this.router.navigate([`../${m.GROUP}/`+t],{relativeTo:this.route})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(S.Ix),e.rXU(S.nX),e.rXU(X))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["ml-group-permissions"]],standalone:!1,decls:3,vars:2,consts:[["loader",""],[3,"columnConfig","data","actions","action",4,"ngIf","ngIfElse"],[3,"action","columnConfig","data","actions"],[1,"loader","d-flex","justify-content-center","align-items-center","my-5"],[3,"diameter"]],template:function(i,s){if(1&i&&e.DNE(0,Je,1,3,"ml-table",1)(1,Ze,2,1,"ng-template",null,0,e.C5r),2&i){const o=e.sdS(2);e.Y8G("ngIf",!s.isLoading)("ngIfElse",o)}},dependencies:[D.bT,_.O,A.LG],encapsulation:2})}}return n})();const we=["permissionsTabs"];let k=(()=>{class n{constructor(t,i){this.route=t,this.router=i,this.tabIndexMapping=[m.USERS,m.EXPERIMENTS,m.PROMPTS,m.MODELS,m.GROUPS]}ngAfterViewInit(){const t=this.route.snapshot.routeConfig?.path;this.permissionsTabs.selectedIndex=t?this.tabIndexMapping.indexOf(t):0}handleTabSelection(t){this.router.navigate([`../${this.tabIndexMapping[t]}`],{relativeTo:this.route})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(S.nX),e.rXU(S.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["ml-permissions"]],viewQuery:function(i,s){if(1&i&&e.GBs(we,5),2&i){let o;e.mGM(o=e.lsd())&&(s.permissionsTabs=o.first)}},standalone:!1,decls:17,vars:0,consts:[["permissionsTabs",""],[3,"selectedIndexChange"],["label","Users permissions"],[1,"my-3"],["label","Experiment permissions"],["label","Prompt permissions"],["label","Model permissions"],["label","Group permissions"]],template:function(i,s){if(1&i){const o=e.RV6();e.j41(0,"mat-tab-group",1,0),e.bIt("selectedIndexChange",function(h){return e.eBV(o),e.Njj(s.handleTabSelection(h))}),e.j41(2,"mat-tab",2)(3,"div",3),e.nrm(4,"ml-user-permissions"),e.k0s()(),e.j41(5,"mat-tab",4)(6,"div",3),e.nrm(7,"ml-experiment-permissions"),e.k0s()(),e.j41(8,"mat-tab",5)(9,"div",3),e.nrm(10,"ml-prompt-permissions"),e.k0s()(),e.j41(11,"mat-tab",6)(12,"div",3),e.nrm(13,"ml-model-permissions"),e.k0s()(),e.j41(14,"mat-tab",7)(15,"div",3),e.nrm(16,"ml-group-permissions"),e.k0s()()()}},dependencies:[P.mq,P.T8,Ge,ye,Le,He,We],encapsulation:2})}}return n})();const b=n=>{const[E,t]=n.split("/");return`${E} / ${t}`},qe=[{path:`${m.USERS}`,component:k},{path:`${m.USER}/:id/experiments`,component:N,data:{breadcrumb:b}},{path:`${m.USER}/:id/models`,component:N,data:{breadcrumb:b}},{path:`${m.USER}/:id/prompts`,component:N,data:{breadcrumb:b}},{path:`${m.USER}/:id`,redirectTo:`${m.USER}/:id/experiments`},{path:`${m.EXPERIMENTS}`,component:k},{path:`${m.EXPERIMENT}/:id`,component:Z,data:{breadcrumb:b}},{path:`${m.MODELS}`,component:k},{path:`${m.MODEL}/:id`,component:ne,data:{breadcrumb:b}},{path:`${m.PROMPTS}`,component:k},{path:`${m.PROMPT}/:id`,component:ee,data:{breadcrumb:b}},{path:`${m.GROUPS}`,component:k},{path:`${m.GROUP}/:id/experiments`,component:y,data:{breadcrumb:b}},{path:`${m.GROUP}/:id/models`,component:y,data:{breadcrumb:b}},{path:`${m.GROUP}/:id`,pathMatch:"full",redirectTo:`${m.GROUP}/:id/experiments`},{path:`${m.GROUP}/:id/prompts`,component:y,data:{breadcrumb:b}},{path:"**",redirectTo:`${m.USERS}`}];let et=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[x.iI.forChild(qe),x.iI]})}}return n})();var tt=l(300);let it=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[D.MD,tt.G,et,V.YN,x.iI]})}}return n})()}}]);