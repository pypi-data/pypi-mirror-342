"use strict";(self.webpackChunk_amzn_amazon_sagemaker_jupyter_ai_q_developer=self.webpackChunk_amzn_amazon_sagemaker_jupyter_ai_q_developer||[]).push([[397],{1397:(e,t,a)=>{a.r(t),a.d(t,{customPlaceholderPlugin:()=>M,default:()=>z,footerPlugin:()=>C,telemetryPlugin:()=>D,unifiedStudioConcealedLLMConfigPlugin:()=>x});var o=a(9844),i=a(1808),n=a(7695);const s=[200,201];var l,r;!function(e){e.SMStudio="SageMaker Studio",e.SMStudioSSO="SageMaker Studio SSO",e.MD_IAM="MD_IAM",e.MD_IDC="MD_IDC",e.MD_SAML="MD_SAML"}(l||(l={})),function(e){e.POST="POST",e.GET="GET",e.PUT="PUT"}(r||(r={}));class d extends Error{constructor(e,t,a,o){super(e),this.errorStatus=t,this.errorCode=a,this.cause=o,Object.setPrototypeOf(this,d.prototype)}}const c=async(e,t,a,o)=>{var l,r;const c=n.ServerConnection.makeSettings({}),u=i.URLExt.join(c.baseUrl,e),v={method:t};a&&(v.body=a),o&&(v.headers=o);const m=await n.ServerConnection.makeRequest(u,v,c);if(!s.includes(m.status)){const e=await m.json(),t=null!==(l=e.errorCode)&&void 0!==l?l:void 0,a=null!==(r=e.errorMessage)&&void 0!==r?r:"unable to fetch data";throw new d(a,m.status,t)}return m};var u=a(3345),v=a.n(u),m=a(3860),p=a.n(m),g=a(2395),h=a(9708),_=a(6989);const y="@amzn/amazon_sagemaker_jupyter_ai_q_developer",S=new _.LabIcon({name:`${y}:upvote-icon`,svgstr:'<svg class="jp-icon3" width="32" height="32" viewBox="0 0 36 36" fill="#616161" xmlns="http://www.w3.org/2000/svg">\n  <path\n        clipRule="evenodd"\n        d="M18.522 12.173l-2.486 4.14v5.723h5.44a1 1 0 00.969-.76l1.01-4.049a1 1 0 00-.97-1.24h-2.44a1 1 0 01-1-1v-2.67a.276.276 0 00-.28-.28.293.293 0 00-.243.136zm-4.486 9.863v-5h-1v5h1zm.434-7l2.338-3.895.002-.003a2.293 2.293 0 011.956-1.102 2.276 2.276 0 012.28 2.28v1.67h1.44a3 3 0 012.91 3.719v.003l-1.01 4.048v.001a3 3 0 01-2.91 2.28h-9.44a1 1 0 01-1-1v-7a1 1 0 011-1h2.434z"\n        fillRule="evenodd"\n      />\n</svg>'}),f=new _.LabIcon({name:`${y}:downvote-icon`,svgstr:'<svg class="jp-icon3" transform="scale(-1,-1)" width="32" height="32" viewBox="0 0 36 36" fill="#616161" xmlns="http://www.w3.org/2000/svg">\n  <path\n        clipRule="evenodd"\n        d="M18.522 12.173l-2.486 4.14v5.723h5.44a1 1 0 00.969-.76l1.01-4.049a1 1 0 00-.97-1.24h-2.44a1 1 0 01-1-1v-2.67a.276.276 0 00-.28-.28.293.293 0 00-.243.136zm-4.486 9.863v-5h-1v5h1zm.434-7l2.338-3.895.002-.003a2.293 2.293 0 011.956-1.102 2.276 2.276 0 012.28 2.28v1.67h1.44a3 3 0 012.91 3.719v.003l-1.01 4.048v.001a3 3 0 01-2.91 2.28h-9.44a1 1 0 01-1-1v-7a1 1 0 011-1h2.434z"\n        fillRule="evenodd"\n      />\n</svg>'});var k;!function(e){e.Upvote="upvote",e.Downvote="downvote"}(k||(k={}));const b=({message:e})=>{const t=(0,o.useTelemetry)(),[a,i]=v().useState({submitted:!1,likeDisabled:!1,dislikeDisabled:!1}),n=o=>{a.submitted||(t.onEvent(((e,t)=>({type:e,message:{id:t.id,type:t.type,time:t.time,metadata:"metadata"in t?t.metadata:{}}}))(o,e)),i(p()((e=>{e.submitted=!0,o===k.Upvote?e.dislikeDisabled=!0:e.likeDisabled=!0}))))};return v().createElement(g.A,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"6px 2px",marginBottom:"1em"}},v().createElement(h.A,{sx:{padding:"4px",...a.likeDisabled&&{opacity:.5}},onClick:()=>n(k.Upvote),"data-testid":"upvote-button",disabled:a.likeDisabled,title:a.dislikeDisabled?"Thank you for your feedback":a.likeDisabled?void 0:"Good response"},v().createElement(S.react,{elementPosition:"center",tag:"span"})),v().createElement(h.A,{sx:{padding:"4px",...a.dislikeDisabled&&{opacity:.5}},onClick:()=>n(k.Downvote),"data-testid":"downvote-button",disabled:a.dislikeDisabled,title:a.likeDisabled?"Thank you for your feedback":a.dislikeDisabled?void 0:"Bad response"},v().createElement(f.react,{elementPosition:"center",tag:"span"})))},w=e=>"agent"!==e.message.type&&"agent-stream"!==e.message.type||"agent-stream"===e.message.type&&!e.message.complete||void 0===e.message.metadata.q_conversation_id||void 0===e.message.metadata.q_message_id?null:v().createElement(b,{message:e.message}),D={id:`${y}:custom-telemetry`,autoStart:!0,provides:o.IJaiTelemetryHandler,activate:async()=>{console.log("JupyterLab extension telemetry plugin is activated");const e=await P();return e&&[l.SMStudio,l.SMStudioSSO].includes(e)&&await c("/amazon_sagemaker_jupyter_ai_q_developer/config",r.POST),{onEvent:e=>{c("/amazon_sagemaker_jupyter_ai_q_developer/telemetry",r.POST,JSON.stringify(e))}}}},M={id:`${y}:custom-placeholder-plugin`,autoStart:!0,requires:[o.IJaiCore],activate:(e,{chatWidget:t})=>{console.log("JupyterLab custom placeholder plugin is activated"),e.restored.then((()=>{var e;null===(e=null==t?void 0:t.renderPromise)||void 0===e||e.then((()=>{const e=t.node.querySelector('*[placeholder="Ask Amazon Q"]');e&&(e.placeholder='Ask any question or type "/" for actions')}))}))}},C={id:`${y}:custom-footer`,autoStart:!0,provides:o.IJaiMessageFooter,activate:e=>(console.log("JupyterLab extension footer plugin is activated"),{component:w})},x={id:`${y}:unified-studio-concealed-llm-config-plugin`,autoStart:!0,requires:[o.IJaiCore],activate:(e,{chatWidget:t})=>{e.restored.then((async()=>{var e;const a=await P();null===(e=null==t?void 0:t.renderPromise)||void 0===e||e.then((()=>{var e,o;if(!a||![l.MD_IAM,l.MD_IDC,l.MD_SAML].includes(a))return;const i=null===(e=t.node.firstChild)||void 0===e?void 0:e.firstChild,n=null===(o=null==i?void 0:i.lastChild)||void 0===o?void 0:o.lastChild;n&&n.remove()}))}))}},P=async()=>{try{const e=await c("/aws/sagemaker/api/auth-details",r.POST);return(await e.json()).environment}catch(e){console.error("Failed to fetch environment: ",e)}},z=[D,C,M,x]}}]);