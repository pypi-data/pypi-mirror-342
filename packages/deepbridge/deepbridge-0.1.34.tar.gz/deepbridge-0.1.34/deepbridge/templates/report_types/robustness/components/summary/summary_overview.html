<div class="summary-overview">
    <div class="overview-header">
        <h3 class="overview-title">Robustness Analysis Summary</h3>
    </div>

    <div class="overview-description">
        <p>
            This analysis evaluates how the model's performance changes when input features are perturbed. 
            A robust model maintains consistent performance despite noise or variations in the input data.
        </p>
    </div>

    <div class="key-findings">
        <h4 class="findings-title">Key Findings</h4>
        
        <div class="finding-item">
            <div class="finding-icon">
                <i class="icon-robustness"></i>
            </div>
            <div class="finding-content">
                <div class="finding-label">Overall Robustness</div>
                <div class="finding-value">
                    {% if robustness_score >= 0.9 %}
                        <span class="excellent">Excellent ({{ (robustness_score * 100)|int }}%)</span>
                    {% elif robustness_score >= 0.8 %}
                        <span class="good">Good ({{ (robustness_score * 100)|int }}%)</span>
                    {% elif robustness_score >= 0.7 %}
                        <span class="moderate">Moderate ({{ (robustness_score * 100)|int }}%)</span>
                    {% elif robustness_score >= 0.6 %}
                        <span class="fair">Fair ({{ (robustness_score * 100)|int }}%)</span>
                    {% else %}
                        <span class="poor">Limited ({{ (robustness_score * 100)|int }}%)</span>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="finding-item">
            <div class="finding-icon">
                <i class="icon-impact"></i>
            </div>
            <div class="finding-content">
                <div class="finding-label">Performance Impact</div>
                <div class="finding-value">
                    {% set avg_impact = (raw_impact + quantile_impact) / 2 %}
                    {% if avg_impact < 0.1 %}
                        <span class="excellent">Minimal ({{ (avg_impact * 100)|round(1) }}%)</span>
                    {% elif avg_impact < 0.2 %}
                        <span class="good">Low ({{ (avg_impact * 100)|round(1) }}%)</span>
                    {% elif avg_impact < 0.3 %}
                        <span class="moderate">Moderate ({{ (avg_impact * 100)|round(1) }}%)</span>
                    {% elif avg_impact < 0.4 %}
                        <span class="fair">Significant ({{ (avg_impact * 100)|round(1) }}%)</span>
                    {% else %}
                        <span class="poor">High ({{ (avg_impact * 100)|round(1) }}%)</span>
                    {% endif %}
                </div>
            </div>
        </div>
        
        {% if feature_subset %}
        <div class="finding-item">
            <div class="finding-icon">
                <i class="icon-features"></i>
            </div>
            <div class="finding-content">
                <div class="finding-label">Feature Selection</div>
                <div class="finding-value">
                    <span class="info">{{ feature_subset|length }} features selected</span>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
    
    <div class="recommendations">
        <h4 class="recommendations-title">Recommendations</h4>
        
        <ul class="recommendation-list">
            {% if robustness_score < 0.7 %}
            <li class="recommendation-item">
                Consider improving model robustness by using the identified optimal feature subset
            </li>
            {% endif %}
            
            {% if raw_impact > 0.3 %}
            <li class="recommendation-item">
                Model shows sensitivity to random noise; consider regularization techniques
            </li>
            {% endif %}
            
            {% if quantile_impact > 0.3 %}
            <li class="recommendation-item">
                Model is sensitive to feature distribution shifts; consider data augmentation or normalization
            </li>
            {% endif %}
            
            {% if raw_impact < 0.2 and quantile_impact < 0.2 %}
            <li class="recommendation-item">
                Model demonstrates good robustness; continue monitoring with new data
            </li>
            {% endif %}
        </ul>
    </div>
</div>