<!-- calibration_table.html - Calibration metrics and bin statistics -->
<div class="calibration-table-container">
    <div class="table-info">
        <p>This table presents calibration statistics across probability bins, showing the relationship between predicted probabilities and observed frequencies.</p>
    </div>

    <div class="table-controls">
        <div class="binning-control">
            <label for="calibration-bin-selector">Bin Count:</label>
            <select id="calibration-bin-selector" class="bin-selector">
                <option value="10" selected>10 Bins</option>
                <option value="20">20 Bins</option>
                <option value="50">50 Bins</option>
                <option value="adaptive">Adaptive Binning</option>
            </select>
        </div>
        
        <div class="display-options">
            <label>
                <input type="checkbox" id="show-empty-bins" checked>
                Show Empty Bins
            </label>
            <label>
                <input type="checkbox" id="highlight-miscalibration">
                Highlight Miscalibration
            </label>
        </div>
    </div>

    <div class="table-wrapper">
        <table class="data-table calibration-table" id="calibration-table">
            <thead>
                <tr>
                    <th class="bin-col">Bin #</th>
                    <th class="bin-range-col">Bin Range</th>
                    <th class="sample-count-col"># Samples</th>
                    <th class="pred-prob-col">Avg. Pred. Probability</th>
                    <th class="obs-freq-col">Observed Frequency</th>
                    <th class="calib-error-col">Calibration Error</th>
                    <th class="contrib-col">ECE Contribution</th>
                </tr>
            </thead>
            <tbody>
                <!-- Table rows will be populated by JavaScript -->
                <tr class="loading-row">
                    <td colspan="7">
                        <div class="loading-indicator">Loading calibration data...</div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="calibration-metrics">
        <h4>Calibration Metrics</h4>
        
        <div class="metrics-grid">
            <div class="metric-item">
                <div class="metric-label">Expected Calibration Error (ECE):</div>
                <div class="metric-value" id="ece-metric">-</div>
            </div>
            <div class="metric-item">
                <div class="metric-label">Maximum Calibration Error (MCE):</div>
                <div class="metric-value" id="mce-metric">-</div>
            </div>
            <div class="metric-item">
                <div class="metric-label">Brier Score:</div>
                <div class="metric-value" id="brier-metric">-</div>
            </div>
            <div class="metric-item">
                <div class="metric-label">Reliability Diagram Deviation:</div>
                <div class="metric-value" id="reliability-deviation">-</div>
            </div>
        </div>
    </div>

    <div class="table-notes">
        <div class="note-item">
            <span class="note-icon">‚öñÔ∏è</span>
            <span class="note-text">
                <strong>Calibration Error</strong> measures the difference between predicted probabilities and observed frequencies within each bin.
                A well-calibrated model should have small errors across all bins.
            </span>
        </div>
        <div class="note-item">
            <span class="note-icon">üìà</span>
            <span class="note-text">
                <strong>ECE Contribution</strong> is each bin's weighted contribution to the overall Expected Calibration Error.
                Bins with more samples and larger errors contribute more significantly to the total calibration error.
            </span>
        </div>
    </div>
</div>