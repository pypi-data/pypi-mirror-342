{% macro tabs(tabs_list) %}
<div class="tabs-container">
    <div class="tabs-nav">
        <ul class="tabs-list">
            {% for tab in tabs_list %}
            <li class="tab-item">
                <a href="#{{ tab.id }}" class="tab-link {% if tab.active %}active{% endif %}" data-tab="{{ tab.id }}">
                    {% if tab.icon %}
                    <span class="tab-icon">{{ tab.icon|safe }}</span>
                    {% endif %}
                    {{ tab.title }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const tabLinks = document.querySelectorAll('.tab-link');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all tabs
                tabLinks.forEach(el => el.classList.remove('active'));
                tabContents.forEach(el => el.classList.remove('active'));
                
                // Add active class to clicked tab
                this.classList.add('active');
                
                // Show corresponding content
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
                
                // Trigger resize event for charts
                window.dispatchEvent(new Event('resize'));
                
                // Dispatch custom event for tabs change
                document.dispatchEvent(new CustomEvent('tabChanged', { 
                    detail: { tabId: tabId }
                }));
            });
        });
    });
</script>
{% endmacro %}