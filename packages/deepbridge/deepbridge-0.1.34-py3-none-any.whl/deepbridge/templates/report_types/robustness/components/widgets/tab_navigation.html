<!-- tab_navigation.html - placeholder -->
{% if tabs %}
<div class="tab-navigation-widget" id="{{ id }}">
    <div class="tab-buttons">
        {% for tab in tabs %}
            <button 
                class="tab-btn {% if tab == activeTab %}active{% endif %}" 
                data-tab="{{ tab|lower|replace(' ', '-') }}"
                data-controller="{{ controller }}"
            >
                {{ tab }}
            </button>
        {% endfor %}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        initTabNavigation('{{ id }}', '{{ controller }}');
    });

    function initTabNavigation(navigationId, controllerName) {
        const navigationWidget = document.getElementById(navigationId);
        if (!navigationWidget) return;

        const buttons = navigationWidget.querySelectorAll('.tab-btn');
        
        buttons.forEach(button => {
            button.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                
                // Update active button state
                buttons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                
                // Call the controller function if it exists
                if (controllerName && window[controllerName]) {
                    window[controllerName](tabId);
                } else {
                    // Fallback: basic tab switching
                    document.querySelectorAll('.tab-content').forEach(content => {
                        const contentTabId = content.getAttribute('data-tab-id');
                        if (contentTabId === tabId) {
                            content.classList.add('active');
                        } else {
                            content.classList.remove('active');
                        }
                    });
                }
                
                // Dispatch event for tab change
                window.dispatchEvent(new CustomEvent('tabChanged', {
                    detail: { tabId: tabId, navigationId: navigationId }
                }));
            });
        });
    }
</script>
{% else %}
<div class="main-tab-content">
    {% block tab_content %}
    <!-- This block will be overridden by child templates -->
    {% endblock %}
</div>
{% endif %}