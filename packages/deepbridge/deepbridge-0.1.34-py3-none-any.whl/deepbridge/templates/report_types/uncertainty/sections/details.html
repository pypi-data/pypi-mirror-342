<!-- details.html - Detailed analysis section of the uncertainty report -->
{% extends "../components/widgets/tab_navigation.html" %}

{% block tab_content %}
<div class="details-section">
    <div class="card">
        <h2>Detailed Analysis</h2>
        <p>This section provides detailed metrics and performance analysis for uncertainty quantification across different alpha levels and prediction scenarios.</p>
        
        <!-- Alpha Level Analysis -->
        <div class="alpha-analysis">
            <h3>Alpha Level Analysis</h3>
            <p>Analysis of coverage performance across different alpha levels (confidence levels)</p>
            
            <div class="alpha-chart-container">
                {% include "../components/charts/alpha_coverage_chart.html" %}
            </div>
            
            <div class="alpha-level-details">
                {% include "../components/tables/alpha_level_table.html" %}
            </div>
        </div>
        
        <!-- Interval Width Analysis -->
        <div class="interval-width-analysis">
            <h3>Interval Width Analysis</h3>
            <p>Analysis of prediction interval widths and their relationship to coverage</p>
            
            <div class="interval-chart-container">
                {% include "../components/charts/interval_width_chart.html" %}
            </div>
            
            <div class="interval-insights">
                <h4>Width vs. Coverage Trade-off</h4>
                <p>Wider prediction intervals generally provide better coverage but lower precision. This analysis explores the optimal balance between interval width and coverage performance.</p>
                
                <div class="insights-grid">
                    <div class="insight-item">
                        <div class="insight-title">Mean Normalized Width</div>
                        <div class="insight-value">{{ mean_norm_width|round(4) }}</div>
                        <div class="insight-description">Average interval width normalized by data range</div>
                    </div>
                    
                    <div class="insight-item">
                        <div class="insight-title">Width Variation</div>
                        <div class="insight-value">{{ width_variation|round(4) }}</div>
                        <div class="insight-description">Coefficient of variation in interval widths</div>
                    </div>
                    
                    <div class="insight-item">
                        <div class="insight-title">Width-Coverage Correlation</div>
                        <div class="insight-value">{{ width_coverage_correlation|round(4) }}</div>
                        <div class="insight-description">Correlation between interval width and empirical coverage</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Group-based Analysis -->
        <div class="group-analysis">
            <h3>Subgroup Analysis</h3>
            <p>Analysis of uncertainty performance across different data subgroups</p>
            
            <div class="group-selector">
                <label for="analysis-group-by">Group By:</label>
                <select id="analysis-group-by" class="feature-select">
                    <option value="none" selected>No Grouping</option>
                    {% for feature in categorical_features %}
                    <option value="{{ feature }}">{{ feature }}</option>
                    {% endfor %}
                </select>
            </div>
            
            {% include "../components/tables/coverage_summary_table.html" %}
            
            <div class="group-insights">
                <h4>Group Performance Comparison</h4>
                <div id="group-comparison-chart" class="chart-container">
                    <!-- Group comparison chart will be rendered here -->
                </div>
                
                <div class="group-findings">
                    <h5>Key Findings</h5>
                    <ul class="findings-list">
                        {% for finding in group_findings %}
                        <li class="finding-item">{{ finding }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Comprehensive Metrics Table -->
        <div class="comprehensive-metrics">
            <h3>Comprehensive Metrics</h3>
            {% include "../components/tables/metrics_details_table.html" %}
        </div>
    </div>
</div>
{% endblock %}