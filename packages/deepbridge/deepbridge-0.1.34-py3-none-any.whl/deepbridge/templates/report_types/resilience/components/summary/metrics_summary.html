<!-- metrics_summary.html - placeholder -->
<!-- metrics_summary.html - Summary of key resilience metrics -->
<div class="metrics-summary">
    <div class="metric-card" data-metric-type="performance_gap">
        <div class="metric-icon">
            <i class="metric-icon-gap"></i>
        </div>
        <div class="metric-content">
            <div class="metric-title">Performance Gap</div>
            <div class="metric-value" data-value="{{ performance_gap }}">
                {% if performance_gap is not defined or performance_gap is none %}
                    N/A
                {% else %}
                    {{ (performance_gap * 100)|round(2)|string + "%" }}
                {% endif %}
            </div>
            <div class="metric-description">Average performance decline on shifted data</div>
        </div>
        <div class="metric-indicator">
            {% if performance_gap is not defined or performance_gap is none %}
                <span class="indicator neutral"></span>
            {% elif performance_gap < 0.05 %}
                <span class="indicator excellent"></span>
            {% elif performance_gap < 0.1 %}
                <span class="indicator good"></span>
            {% elif performance_gap < 0.15 %}
                <span class="indicator moderate"></span>
            {% elif performance_gap < 0.25 %}
                <span class="indicator fair"></span>
            {% else %}
                <span class="indicator poor"></span>
            {% endif %}
        </div>
    </div>
    
    <div class="metric-card" data-metric-type="distribution_shift">
        <div class="metric-icon">
            <i class="metric-icon-shift"></i>
        </div>
        <div class="metric-content">
            <div class="metric-title">Distribution Shift</div>
            <div class="metric-value" data-value="{{ avg_dist_shift }}">
                {% if avg_dist_shift is not defined or avg_dist_shift is none %}
                    N/A
                {% else %}
                    {{ avg_dist_shift|round(2) }}
                {% endif %}
            </div>
            <div class="metric-description">Average distribution shift magnitude</div>
        </div>
        <div class="metric-indicator">
            {% if avg_dist_shift is not defined or avg_dist_shift is none %}
                <span class="indicator neutral"></span>
            {% elif avg_dist_shift < 0.1 %}
                <span class="indicator excellent"></span>
            {% elif avg_dist_shift < 0.2 %}
                <span class="indicator good"></span>
            {% elif avg_dist_shift < 0.3 %}
                <span class="indicator moderate"></span>
            {% elif avg_dist_shift < 0.5 %}
                <span class="indicator fair"></span>
            {% else %}
                <span class="indicator poor"></span>
            {% endif %}
        </div>
    </div>
    
    <div class="metric-card" data-metric-type="base_performance">
        <div class="metric-icon">
            <i class="metric-icon-base"></i>
        </div>
        <div class="metric-content">
            <div class="metric-title">Base Performance</div>
            <div class="metric-value" data-value="{{ base_score }}">
                {% if base_score is not defined or base_score is none %}
                    N/A
                {% else %}
                    {{ (base_score * 100)|round(2)|string + "%" }}
                {% endif %}
            </div>
            <div class="metric-description">Model performance on baseline data</div>
        </div>
        <div class="metric-indicator">
            {% if base_score is not defined or base_score is none %}
                <span class="indicator neutral"></span>
            {% elif base_score >= 0.95 %}
                <span class="indicator excellent"></span>
            {% elif base_score >= 0.9 %}
                <span class="indicator good"></span>
            {% elif base_score >= 0.85 %}
                <span class="indicator moderate"></span>
            {% elif base_score >= 0.8 %}
                <span class="indicator fair"></span>
            {% else %}
                <span class="indicator poor"></span>
            {% endif %}
        </div>
    </div>
    
    <div class="metric-card" data-metric-type="outlier_sensitivity">
        <div class="metric-icon">
            <i class="metric-icon-outlier"></i>
        </div>
        <div class="metric-content">
            <div class="metric-title">Outlier Sensitivity</div>
            <div class="metric-value" data-value="{{ outlier_sensitivity }}">
                {% if outlier_sensitivity is not defined or outlier_sensitivity is none %}
                    N/A
                {% elif outlier_sensitivity is string %}
                    {{ outlier_sensitivity }}
                {% else %}
                    {{ outlier_sensitivity|round(2) }}
                {% endif %}
            </div>
            <div class="metric-description">Model sensitivity to outlier samples</div>
        </div>
        <div class="metric-indicator">
            {% if outlier_sensitivity is not defined or outlier_sensitivity is none %}
                <span class="indicator neutral"></span>
            {% elif outlier_sensitivity is string %}
                <span class="indicator neutral"></span>
            {% elif outlier_sensitivity < 0.1 %}
                <span class="indicator excellent"></span>
            {% elif outlier_sensitivity < 0.2 %}
                <span class="indicator good"></span>
            {% elif outlier_sensitivity < 0.3 %}
                <span class="indicator moderate"></span>
            {% elif outlier_sensitivity < 0.4 %}
                <span class="indicator fair"></span>
            {% else %}
                <span class="indicator poor"></span>
            {% endif %}
        </div>
    </div>
</div>