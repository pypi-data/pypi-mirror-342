name: api正常tool
description: ''
blocks:
  - type: internal:chat_memory_query
    name: 4337938a-bb7c-4b78-b8f4-591418746fc0
    params:
      scope_type: group
    position:
      x: -79
      y: 525
    connected_to:
      - target: 9fff5990-b964-45ae-b6c7-fe3362a3be98
        mapping:
          from: memory_content
          to: memory_content
  - type: internal:chat_message_constructor
    name: 9fff5990-b964-45ae-b6c7-fe3362a3be98
    params: {}
    position:
      x: 368
      y: 135
    connected_to:
      - target: 618ee860-064d-4b25-88dd-3b29a17b52d7
        mapping:
          from: llm_msg
          to: prompt
  - type: internal:get_message
    name: b3bf9f91-2222-4683-9857-298d318ff96c
    params: {}
    position:
      x: 16
      y: 227
    connected_to:
      - target: 9fff5990-b964-45ae-b6c7-fe3362a3be98
        mapping:
          from: msg
          to: user_msg
      - target: 4337938a-bb7c-4b78-b8f4-591418746fc0
        mapping:
          from: sender
          to: chat_sender
      - target: 7633e8ef-0661-4f08-9d59-791617f775f6
        mapping:
          from: sender
          to: target
  - type: internal:text_block
    name: a2e6dcd5-13c5-4f67-88fd-1b7002be7900
    params:
      text: "# Information\n\n以下是当前的系统信息：\n当前日期时间：{current_date_time\n}\n\n# Memories\n以下是之前发生过的对话记录。\n-- 对话记录开始 --\n{memory_content}\n-- 对话记录结束 --\n\n"
    position:
      x: -54
      y: 652
    connected_to:
      - target: 9fff5990-b964-45ae-b6c7-fe3362a3be98
        mapping:
          from: text
          to: system_prompt_format
  - type: internal:text_block
    name: b0e7afac-433b-4f28-8ba2-b44368f7212d
    params:
      text: '{user_name}说：{user_msg}'
    position:
      x: -61
      y: 380
    connected_to:
      - target: 9fff5990-b964-45ae-b6c7-fe3362a3be98
        mapping:
          from: text
          to: user_prompt_format
  - type: auto:url_to_message
    name: 8bd5a2f0-b598-4384-9ff4-c4976e4ec8e8
    params: {}
    position:
      x: 1073
      y: 148
    connected_to:
      - target: 7633e8ef-0661-4f08-9d59-791617f775f6
        mapping:
          from: message
          to: msg
  - type: internal:send_message
    name: 7633e8ef-0661-4f08-9d59-791617f775f6
    params:
      im_name: onebot
    position:
      x: 1405
      y: 157
  - type: auto:auto_execute_tools
    name: 618ee860-064d-4b25-88dd-3b29a17b52d7
    params:
      available_block_names: text_to_image,music_search,weather_search,random_girl_video,random_cosplay,random_emoji,sougou_image_search,douyin_video_search,bilibili_search
      max_retries: 3
      model_name:
    position:
      x: 654
      y: 137
    connected_to:
      - target: 8bd5a2f0-b598-4384-9ff4-c4976e4ec8e8
        mapping:
          from: results
          to: text
